<?xml version="1.0"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom"> <!--sen np.ant -->
      <cat-item tags="n.*"/>
      <cat-item tags="np.loc.*"/>
      <cat-item tags="np.al.*"/>
    </def-cat>

    <def-cat n="nom_nom"> <!--noms "normals" -->
      <cat-item tags="n.m.*"/>
      <cat-item tags="n.f.*"/>
      <cat-item tags="n.mf.*"/>
    </def-cat>

    <def-cat n="np">
      <cat-item tags="np.*"/>
    </def-cat>

    <def-cat n="n_np">
      <cat-item tags="n.*"/>
      <cat-item tags="np.loc.*"/>
      <cat-item tags="np.al.*"/>
      <cat-item tags="np.ant.*"/>
    </def-cat>

     <def-cat n="ant">
      <cat-item tags="np.ant.*"/>
    </def-cat>

     <def-cat n="antunk">
      <cat-item tags="np.ant.*"/>
      <cat-item tags=""/>
    </def-cat>

     <def-cat n="Saint">
      <cat-item lemma="saint" tags="adj.*"/>
      <cat-item lemma="Saint" tags="np.loc.*"/>
      <cat-item lemma="Sainte" tags="np.loc.*"/>
      <cat-item lemma="St" tags="np.loc.*"/>
      <cat-item lemma="Ste" tags="np.loc.*"/>
    </def-cat>

     <def-cat n="npunk">
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.loc.*"/>
      <cat-item tags=""/>
    </def-cat>

    <def-cat n="acr">
      <cat-item tags="n.acr.*"/>
    </def-cat>

     <def-cat n="any">
      <cat-item tags="prep"/>
      <cat-item tags="det.*"/>
      <cat-item tags=""/>
    </def-cat>

     <def-cat n="Marie" c="pour corriger">
      <cat-item lemma="marier" tags="vblex.pri.p1.sg"/>
      <cat-item lemma="marier" tags="vblex.pri.p3.sg"/>
      <cat-item lemma="marier" tags="vblex.prs.p1.sg"/>
      <cat-item lemma="marier" tags="vblex.prs.p3.sg"/>
      <cat-item lemma="marier" tags="vblex.imp.p2.sg"/>
    </def-cat>

     <def-cat n="loc">
      <cat-item tags="np.loc"/>
      <cat-item tags="np.loc.*"/>
    </def-cat>

    <def-cat n="sent">
       <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="excl">
       <cat-item lemma="!" tags="sent"/>
    </def-cat>

    <def-cat n="sent_esp">        <!-- tipaj okazoj, post kiuj aperas majuskla A misanalizita kiel la verbo 'havi' -->
       <cat-item lemma="." tags="sent"/>
       <cat-item lemma="?" tags="sent"/>
       <cat-item lemma="!" tags="sent"/>
       <cat-item lemma=":" tags="sent"/>
       <cat-item tags="guio"/>
       <cat-item tags="lpar"/>
       <cat-item tags="lcit"/>
    </def-cat>

    <def-cat n="sent_esp2">        <!-- tipaj okazoj, post kiuj aperas imperativo -->
       <cat-item lemma=";" tags="sent"/>
       <cat-item tags="cm"/>
       <cat-item tags="rpar"/>
       <cat-item tags="rcit"/>
    </def-cat>

    <def-cat n="punkto">
       <cat-item lemma="." tags="sent"/>
    </def-cat>

    <def-cat n="sent_coma">
       <cat-item tags="cm"/>
    </def-cat>

    <def-cat n="sent_lpar">
       <cat-item tags="lpar"/>
    </def-cat>

    <def-cat n="sent_rpar">
       <cat-item tags="rpar"/>
    </def-cat>

    <def-cat n="sent_lcit">
       <cat-item tags="lcit"/>
    </def-cat>

    <def-cat n="sent_rcit">
       <cat-item tags="rcit"/>
    </def-cat>

    <def-cat n="guio">
       <cat-item tags="guio"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>

<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
    <def-cat n="adjADJ"> <!-- únicament adjs, no pp -->
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>

    <def-cat n="adj_adv">
      <cat-item tags="adj.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="meilleur">
      <cat-item lemma="meilleur" tags="adj.*"/>
      <cat-item lemma="pire" tags="adj.*"/>
    </def-cat>

    <def-cat n="mieux">
      <cat-item lemma="mieux" tags="adv"/>
      <cat-item lemma="mieux" tags="adv"/>
      <cat-item lemma="beaucoup mieux" tags="adv"/>
      <cat-item lemma="un peu mieux" tags="adv"/>
      <cat-item lemma="plus" tags="adv"/>
      <cat-item lemma="beaucoup plus" tags="adv"/>
      <cat-item lemma="un peu plus" tags="adv"/>
      <cat-item lemma="moins" tags="adv"/>
      <cat-item lemma="beaucoup moins" tags="adv"/>
      <cat-item lemma="un peu moins" tags="adv"/>
    </def-cat>

    <def-cat n="unknown"> <!-- unknown words -->
      <cat-item tags=""/>
    </def-cat>

    <def-cat n="le_det">
      <cat-item lemma="le" tags="det.*"/>
    </def-cat>

    <def-cat n="les_det">
      <cat-item lemma="le" tags="det.def.mf.pl"/>
    </def-cat>

    <def-cat n="un_autre_det">
      <cat-item lemma="un autre" tags="det.*"/>
    </def-cat>

    <def-cat n="le-erara">
      <cat-item lemma="le" tags="det.*"/>
      <cat-item lemma="le" tags="prn.*"/>
    </def-cat>

    <def-cat n="le_prn">
      <cat-item lemma="le" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="toutce">
      <cat-item lemma="tout ce" tags="det.*"/>
    </def-cat>

    <def-cat n="tous">
      <cat-item lemma="tout" tags="predet.*.pl"/>
      <cat-item lemma="tout" tags="prn.*.pl"/>
    </def-cat>

    <def-cat n="ce-erara">
      <cat-item lemma="ce" tags="det.*"/>
      <cat-item lemma="ce" tags="prn.*"/>
    </def-cat>

    <def-cat n="que-erara">
      <cat-item lemma="que" tags="prn.*"/>
      <cat-item lemma="que" tags="cnjsub"/>
    </def-cat>

    <def-cat n="quequi-erara">
      <cat-item lemma="que" tags="prn.*"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="qui" tags="prn.*"/>
    </def-cat>

    <def-cat n="a-erara">
      <cat-item lemma="avoir" tags="vbhaver.pri.p3.sg"/>
      <cat-item lemma="avoir" tags="vblex.pri.p3.sg"/>
    </def-cat>

    <def-cat n="a-all">
      <cat-item lemma="à" tags="pr"/>
      <cat-item lemma="avoir" tags="vbhaver.pri.p3.sg"/>
      <cat-item lemma="avoir" tags="vblex.pri.p3.sg"/>
    </def-cat>

    <def-cat n="tout_predet">
      <cat-item lemma="tout" tags="predet.*"/>
    </def-cat>

   <def-cat n="det">
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <cat-item tags="num.*"/>
    </def-cat>

   <def-cat n="dem">
      <cat-item tags="det.dem.*"/>
    </def-cat>
   <def-cat n="def">
      <cat-item tags="det.def.*"/>
    </def-cat>
   <def-cat n="tot">
      <cat-item tags="det.qnt.*"/>
    </def-cat>
   <def-cat n="det_pos">
      <cat-item tags="det.pos.*"/>
    </def-cat>
   <def-cat n="det_defpos">
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
    </def-cat>

    <def-cat n="num-ciferoj">
      <cat-item tags="num.ciph.*"/>
    </def-cat>

    <def-cat n="num-vorto">
      <cat-item tags="num.m.*"/>
      <cat-item tags="num.f.*"/>
      <cat-item tags="num.mf.*"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="prpers">
      <cat-item tags="prn.tn.*"/>
      <cat-item lemma="on" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="il">
      <cat-item lemma="il" tags="prn.tn.p3.m.sg"/>
    </def-cat>

    <def-cat n="il_enc">
      <cat-item lemma="il" tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="il_ils">
      <cat-item lemma="il" tags="prn.tn.p3.*"/>
      <cat-item lemma="ils" tags="prn.tn.p3.*"/>
    </def-cat>

    <def-cat n="se">
      <cat-item lemma="se" tags="prn.pro.ref.*"/>
    </def-cat>

    <def-cat n="tn"><!--EO indefinits i companyia sense gènere al EO-->
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
      <cat-item tags="prn.tn.nt.*"/>
    </def-cat>

    <def-cat n="tn_subj">
      <cat-item lemma="je" tags="prn.tn.*"/>
      <cat-item lemma="tu" tags="prn.tn.*"/>
      <cat-item lemma="il" tags="prn.tn.*"/>
      <cat-item lemma="elle" tags="prn.tn.*"/>
      <cat-item lemma="on" tags="prn.pro.*"/>
      <cat-item lemma="nous" tags="prn.tn.*"/>
      <cat-item lemma="vous" tags="prn.tn.*"/>
      <cat-item lemma="ils" tags="prn.tn.*"/>
      <cat-item lemma="elles" tags="prn.tn.*"/>
    </def-cat>

    <def-cat n="tn_obj"> <!-- problemo: me kaj te povas esti ankaŭ dativaj; nous kaj vous povas esti ankaŭ dativaj kaj nominativaj (kvankam, se nominativaj, principe ili devas alveni kiel prn.tn) -->
      <cat-item lemma="me" tags="prn.pro.*"/>
      <cat-item lemma="te" tags="prn.pro.*"/>
      <cat-item lemma="le" tags="prn.pro.*"/>
      <cat-item lemma="la" tags="prn.pro.*"/>
      <cat-item lemma="se" tags="prn.pro.*"/>
      <cat-item lemma="nous" tags="prn.pro.*"/>
      <cat-item lemma="vous" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="tn_dat"> <!-- problemo: me kaj te povas esti ankaŭ akuzativaj; nous kaj vous povas esti ankaŭ akuzativaj kaj nominativaj (kvankam, se nominativaj, principe ili devas alveni kiel prn.tn) -->
      <cat-item lemma="me" tags="prn.pro.*"/>
      <cat-item lemma="te" tags="prn.pro.*"/>
      <cat-item lemma="lui" tags="prn.pro.*"/>
      <cat-item lemma="leur" tags="prn.pro.*"/>
      <cat-item lemma="nous" tags="prn.pro.*"/>
      <cat-item lemma="vous" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="tn_pro"> <!-- CD i CI en francès --> <!-- PERÒ TAMBÉ EL SUBJECTE!!! -->
<!--
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
      <cat-item tags="prn.tn.nt.*"/>
      <cat-item tags="prn.tn.*"/>
-->
      <cat-item tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="tn_itg_pos"><!--Aquí no hi entren els pronoms personals, caldrà fer-ne un xunc a part. -->
      <!--<cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>-->
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="pos">
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="proenc">
      <cat-item lemma="prpers" tags="prn.enc.*"/>
      <cat-item lemma="prpers" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="prosubjenc">
      <cat-item lemma="je" tags="prn.enc.*"/>
      <cat-item lemma="tu" tags="prn.enc.*"/>
      <cat-item lemma="il" tags="prn.enc.*"/>
      <cat-item lemma="elle" tags="prn.enc.*"/>
      <cat-item lemma="on" tags="prn.enc.*"/>
      <cat-item lemma="nous" tags="prn.enc.*"/>
      <cat-item lemma="vous" tags="prn.enc.*"/>
      <cat-item lemma="ils" tags="prn.enc.*"/>
      <cat-item lemma="elles" tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="profort"> <!-- ver regla PRO_FORT...-->
      <cat-item lemma="prpers_fort" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="relatiu"> <!-- EO-->
      <cat-item tags="prn.rel.*"/>
    </def-cat>

    <def-cat n="pro_strict">
      <cat-item tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="pro">
      <cat-item tags="prn.pro.*"/>
      <cat-item lemma="nous" tags="prn.tn.*"/>
      <cat-item lemma="vous" tags="prn.tn.*"/>
    </def-cat>

    <def-cat n="pro-noref">
      <cat-item tags="prn.pro.p1.*"/>
      <cat-item tags="prn.pro.p2.*"/>
      <cat-item tags="prn.pro.p3.*"/>
      <cat-item tags="prn.pro.adv"/>
    </def-cat>

    <def-cat n="ij">
      <cat-item tags="ij"/>
    </def-cat>

    <def-cat n="verbnm_inf_ger"><!--verb no modal, infinitiu i gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.pron.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.pron.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbser.pron.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbhaver.pron.ger"/>
    </def-cat>

    <def-cat n="verb_imp"><!--verb no modal, imperatiu -->
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pron.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pron.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pron.imp.*"/>
    </def-cat>

    <def-cat n="verbnm_imp"><!--verb no modal, imperatiu -->
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pron.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pron.imp.*"/>
    </def-cat>

    <def-cat n="verbm"><!--verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbmpp"><!--verb modal -->
      <cat-item tags="vbmod.pp.*"/>
    </def-cat>

    <def-cat n="inf_imp"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.imp.*"/>
    </def-cat>

    <def-cat n="verbm_inf_ger"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="ser">
      <cat-item lemma="être" tags="vbser.*"/>
    </def-cat>

    <def-cat n="ser_pl">
      <cat-item lemma="être" tags="vbser.*.pl"/>
    </def-cat>

    <def-cat n="ser_inf">
      <cat-item lemma="être" tags="vbser.inf"/>
    </def-cat>

    <def-cat n="ser_pp">
      <cat-item lemma="être" tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="haver">
      <cat-item lemma="avoir" tags="vbhaver.*"/>
      <cat-item lemma="avoir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="haver_pl">
      <cat-item lemma="avoir" tags="vbhaver.*.pl"/>
      <cat-item lemma="avoir" tags="vblex.*.pl"/>
    </def-cat>

    <def-cat n="sagir">
      <cat-item lemma="s'agir#" tags="vblex.*"/>
      <cat-item lemma="s'agir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="haver_inf">
      <cat-item lemma="avoir" tags="vbhaver.inf"/>
      <cat-item lemma="avoir" tags="vblex.inf"/>
    </def-cat>

    <def-cat n="copula">
      <cat-item lemma="être" tags="vbser.*"/>
      <cat-item lemma="paraître" tags="vblex.*"/>
    </def-cat>

    <def-cat n="c_etre">
      <cat-item lemma="c'être" tags="vbser.*"/>
    </def-cat>

    <def-cat n="etre_paraitre">
      <cat-item lemma="être" tags="vbser.*"/>
      <cat-item lemma="paraître" tags="vbser.*"/>
    </def-cat>

    <def-cat n="etre_paraitre_pp">
      <cat-item lemma="être" tags="vbser.pp.*"/>
      <cat-item lemma="paraître" tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="venir">
      <cat-item lemma="venir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="verb_adv"> <!-- helpverboj tradukendaj al adverboj -->
      <cat-item lemma="continuer" tags="vblex.*"/>
      <cat-item lemma="s'empresser" tags="vblex.*"/>
      <cat-item lemma="faillir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="verb">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbcj">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>


    <def-cat n="verbcj2"> <!-- kiel la antaŭa, sed sen vbmod -->
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>

    <def-cat n="verbcjger">                 <!-- verbcj + ger -->
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>

      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="verbcjinf">                 <!-- verbcj + inf -->
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>

      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="verbncj">                 <!-- inf + ger + pp -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
    </def-cat>

    <def-cat n="sercj">
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
    </def-cat>

    <def-cat n="serncj">                 <!-- inf + ger + pp -->
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
    </def-cat>

    <def-cat n="pp_avoir">
      <cat-item tags="vbhaver.pp.*"/>
    </def-cat>

    <def-cat n="pp_navoir"> <!-- pp sans avoir -->
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
    </def-cat>

    <def-cat n="luipp">
      <cat-item lemma="luire" tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="lui">
      <cat-item lemma="lui" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="prndatobj">        <!-- dativaj pronomoj en esperanto: al li, al ili -->
      <cat-item lemma="lui" tags="prn.pro.*"/>
      <cat-item lemma="leur" tags="prn.pro.*"/>
<!--
      <cat-item tags="prn.pro.p1.*"/>
      <cat-item tags="prn.pro.p2.*"/>
      <cat-item tags="prn.pro.p3.*"/>
-->
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="haverinf">
      <cat-item tags="vbhaver.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="imp">
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
    </def-cat>

    <def-cat n="parler">
      <cat-item lemma="parler" tags="vblex.*"/>
    </def-cat>

    <def-cat n="ser-pp">
      <cat-item tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="faire-pp">
      <cat-item lemma="faire" tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="vbser-pp"> <!-- verboj postulantaj la helpverbon "être" (do necesas konsideri kiel kompleksa tenso kaj ne kiel pasiva formo "être + pp" -->
      <cat-item lemma="arriver" tags="vblex.pp.*"/>
      <cat-item lemma="venir" tags="vblex.pp.*"/>
      <cat-item lemma="devenir" tags="vblex.pp.*"/>
      <cat-item lemma="redevenir" tags="vblex.pp.*"/>
      <cat-item lemma="revenir" tags="vblex.pp.*"/>
      <cat-item lemma="aller" tags="vblex.pp.*"/>
      <cat-item lemma="naître" tags="vblex.pp.*"/>
      <cat-item lemma="naitre" tags="vblex.pp.*"/>
      <cat-item lemma="descendre" tags="vblex.pp.*"/>
      <cat-item lemma="redescendre" tags="vblex.pp.*"/>
      <cat-item lemma="entrer" tags="vblex.pp.*"/>
      <cat-item lemma="entrer# en conflit" tags="vblex.pp.*"/>
      <cat-item lemma="entrer# en éruption" tags="vblex.pp.*"/>
      <cat-item lemma="entrer# en collision" tags="vblex.pp.*"/>
      <cat-item lemma="entrer# en confédération" tags="vblex.pp.*"/>
      <cat-item lemma="entrer# en vigueur" tags="vblex.pp.*"/>
      <cat-item lemma="rentrer" tags="vblex.pp.*"/>
      <cat-item lemma="monter" tags="vblex.pp.*"/>
      <cat-item lemma="remonter" tags="vblex.pp.*"/>
      <cat-item lemma="rester" tags="vbser.pp.*"/>
      <cat-item lemma="sortir" tags="vblex.pp.*"/>
      <cat-item lemma="resortir" tags="vblex.pp.*"/>
      <cat-item lemma="tomber" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# dans la misère" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# dans la déchéance" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# en décadance" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# en panne" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# en ruine" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# en morceaux" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# de haut" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# sur" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# amoureux" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# malade" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# d'accord" tags="vblex.pp.*"/>
      <cat-item lemma="tomber# en panne" tags="vblex.pp.*"/>
      <cat-item lemma="retomber" tags="vblex.pp.*"/>
      <cat-item lemma="retourner" tags="vblex.pp.*"/>
      <cat-item lemma="mourir" tags="vblex.pp.*"/>
      <cat-item lemma="partir" tags="vblex.pp.*"/>
      <cat-item lemma="repartir" tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="yavoir">
      <cat-item lemma="y avoir" tags="vblex.*"/>
      <cat-item lemma="y en avoir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="verb_impers"> <!-- verboj nepersonaj " -->
      <cat-item lemma="pleuvoir" tags="vblex.*"/>
      <cat-item lemma="neiger" tags="vblex.*"/>
      <cat-item lemma="falloir" tags="vbmod.*"/>
      <cat-item lemma="en falloir" tags="vbmod.*"/>
      <cat-item lemma="sembler" tags="vblex.*"/>
      <cat-item lemma="paraître" tags="vblex.*"/>
      <cat-item lemma="s'agir#" tags="vblex.*"/>
      <cat-item lemma="s'agir" tags="vblex.*"/>
      <cat-item lemma="se pouvoir" tags="vbmod.*"/>
      <cat-item lemma="y avoir" tags="vblex.*"/>
      <cat-item lemma="y en avoir" tags="vblex.*"/>
      <cat-item lemma="en exister" tags="vblex.*"/>
      <cat-item lemma="exister" tags="vblex.*"/>
      <cat-item lemma="manquer" tags="vblex.*"/>
      <cat-item lemma="rester" tags="vbser.*"/> <!-- larĝe plej ofte funkcias tiel, kiam post "il" -->
    </def-cat>

    <def-cat n="verbinf_impers"> <!-- verboj nepersonaj " -->
      <cat-item lemma="pleuvoir" tags="vblex.inf"/>
      <cat-item lemma="neiger" tags="vblex.inf"/>
      <cat-item lemma="falloir" tags="vbmod.inf"/>
      <cat-item lemma="en falloir" tags="vbmod.inf"/>
      <cat-item lemma="sembler" tags="vblex.*"/>
      <cat-item lemma="paraître" tags="vblex.*"/>
      <cat-item lemma="s'agir# de" tags="vblex.inf"/>
      <cat-item lemma="s'agir" tags="vblex.inf"/>
      <cat-item lemma="se pouvoir" tags="vbmod.inf"/>
      <cat-item lemma="y avoir" tags="vblex.inf."/>
      <cat-item lemma="y en avoir" tags="vblex.inf."/>
      <cat-item lemma="en exister" tags="vblex.inf."/>
      <cat-item lemma="exister" tags="vblex.inf"/>
      <cat-item lemma="manquer" tags="vblex.inf"/>
      <cat-item lemma="rester" tags="vbser.inf"/> <!-- larĝe plej ofte funkcias tiel, kiam post "il" -->
    </def-cat>

    <def-cat n="verbpp_impers"> <!-- verboj nepersonaj " -->
      <cat-item lemma="pleuvoir" tags="vblex.pp.*"/>
      <cat-item lemma="neiger" tags="vblex.pp.*"/>
      <cat-item lemma="falloir" tags="vbmod.pp.*"/>
      <cat-item lemma="sembler" tags="vblex.pp.*"/>
      <cat-item lemma="paraître" tags="vblex.pp.*"/>
      <cat-item lemma="exister" tags="vblex.pp.*"/>
      <cat-item lemma="manquer" tags="vblex.pp.*"/>
      <cat-item lemma="rester" tags="vbser.pp.*"/> <!-- larĝe plej ofte funkcias tiel, kiam post "il" -->
    </def-cat>

    <def-cat n="verb_impers_comp"> <!-- verboj nepersonaj akceptantaj rektan/nerektan komplementon -->
      <cat-item lemma="falloir" tags="vbmod.*"/>
      <cat-item lemma="en falloir" tags="vbmod.*"/>
      <cat-item lemma="manquer" tags="vblex.*"/>
      <cat-item lemma="paraître" tags="vblex.*"/>
      <cat-item lemma="rester" tags="vbser.*"/>
      <cat-item lemma="sembler" tags="vblex.*"/>
    </def-cat>

    <def-cat n="verbpp_impers_comp"> <!-- verboj nepersonaj akceptantaj rektan/nerektan komplementon -->
      <cat-item lemma="falloir" tags="vbmod.pp.*"/>
      <cat-item lemma="manquer" tags="vblex.pp.*"/>
      <cat-item lemma="paraître" tags="vblex.pp.*"/>
      <cat-item lemma="rester" tags="vbser.pp.*"/>
      <cat-item lemma="sembler" tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="adv_cnj">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="preadv">
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>

    <def-cat n="advrel">
      <cat-item tags="rel.adv"/>
    </def-cat>

    <def-cat n="plus_moins_strict">
      <cat-item lemma="plus" tags="adv"/>
      <cat-item lemma="plus" tags="preadv"/>
      <cat-item lemma="plus" tags="det.*"/><!-- pel tagger-->
      <cat-item lemma="plus" tags="n.*"/><!-- pel tagger-->
      <cat-item lemma="moins" tags="adv"/>
      <cat-item lemma="moins" tags="preadv"/>
      <cat-item lemma="moins" tags="det.*"/><!-- pel tagger-->
    </def-cat>

    <def-cat n="plus_moins">
      <cat-item lemma="plus" tags="adv"/>
      <cat-item lemma="plus" tags="preadv"/>
      <cat-item lemma="plus" tags="det.*"/><!-- pel tagger-->
      <cat-item lemma="plus" tags="n.*"/><!-- pel tagger-->
      <cat-item lemma="moins" tags="adv"/>
      <cat-item lemma="moins" tags="preadv"/>
      <cat-item lemma="moins" tags="det.*"/><!-- pel tagger-->
      <cat-item lemma="un peu plus" tags="adv"/>
      <cat-item lemma="un peu moins" tags="adv"/>
      <cat-item lemma="beaucoup plus" tags="adv"/>
      <cat-item lemma="beaucoup moins" tags="adv"/>
      <cat-item lemma="pas plus" tags="adv"/>
    </def-cat>

    <def-cat n="plus_n">
      <cat-item lemma="plus" tags="n.*"/><!-- pel tagger-->
    </def-cat>

    <def-cat n="possible">
      <cat-item lemma="possible" tags="adj.*"/>
    </def-cat>

    <def-cat n="si_cmp">
      <cat-item lemma="si" tags="adv"/>
    </def-cat>

    <def-cat n="ne">
      <cat-item lemma="ne" tags="adv"/>
    </def-cat>

    <def-cat n="pas">
      <cat-item lemma="pas" tags="adv"/>
    </def-cat>

    <def-cat n="ci">
      <cat-item lemma="ci" tags="adv"/>
    </def-cat>

    <def-cat n="la_adv">
      <cat-item lemma="là" tags="adv"/>
    </def-cat>

    <def-cat n="jamais">
      <cat-item lemma="jamais" tags="adv"/>
    </def-cat>

    <def-cat n="advneg">
      <cat-item lemma="jamais" tags="adv"/>
      <cat-item lemma="pas du tout" tags="adv"/>
      <cat-item lemma="non plus" tags="adv"/>
    </def-cat>

    <def-cat n="pronneg">
      <cat-item lemma="rien" tags="prn.*"/>
      <cat-item lemma="point" tags="n.*"/>
    </def-cat>

    <def-cat n="tout">
      <cat-item lemma="tout" tags="adv"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="et" tags="cnjcoo"/>
      <cat-item lemma="ou" tags="cnjcoo"/>
      <cat-item lemma="mais" tags="cnjcoo"/>
    </def-cat>

     <def-cat n="cnjcoopercorregir"> <!-- EO afegit per a corregir errors del tagger, veure regles-->
      <cat-item lemma="que" tags="cnjcoo"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="que" tags="prn.itg.*"/>
      <cat-item lemma="que" tags="prn.rel.*"/>
      <cat-item lemma="qui" tags="prn.itg.*"/>
      <cat-item lemma="qui" tags="prn.rel.*"/>
    </def-cat>

     <def-cat n="quepercorregir"> <!-- EO afegit per a corregir errors del tagger, veure regles-->
      <cat-item lemma="que" tags="cnjcoo"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="que" tags="prn.itg.*"/>
      <cat-item lemma="que" tags="prn.rel.*"/>
    </def-cat>

     <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

     <def-cat n="cnjcomp"><!-- regla adv adj cnjcopm-->
      <cat-item lemma="que" tags="cnjcoo"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="que" tags="cnjadv"/>
      <cat-item lemma="que" tags="prn.*"/>
    </def-cat>

    <def-cat n="plus">
      <cat-item lemma="plus" tags="n.*"/>
      <cat-item lemma="plus" tags="adv"/>
    </def-cat>

    <def-cat n="par">
      <cat-item lemma="par" tags="pr"/>
    </def-cat>

    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>

    <def-cat n="de_a">
      <cat-item lemma="de" tags="pr"/>
      <cat-item lemma="à" tags="pr"/>
    </def-cat>

    <def-cat n="de_von"> <!-- por familiaj nomoj -->
      <cat-item lemma="de" tags="pr"/>
      <cat-item lemma="von" tags=""/>
      <cat-item lemma="van" tags="n.*"/>
      <cat-item lemma="del" tags=""/>
      <cat-item lemma="dello" tags=""/>
      <cat-item lemma="della" tags=""/>
      <cat-item lemma="delli" tags=""/>
      <cat-item lemma="delle" tags=""/>
      <cat-item lemma="do" tags=""/>
      <cat-item lemma="da" tags=""/>
      <cat-item lemma="di" tags=""/>
      <cat-item lemma="du" tags="pr"/>
    </def-cat>

    <def-cat n="en">
      <cat-item lemma="en" tags="prn.pro.adv"/>
      <cat-item lemma="en" tags="pr"/>
    </def-cat>

    <def-cat n="en_pr">
      <cat-item lemma="en" tags="pr"/>
    </def-cat>

    <def-cat n="a_pr">
      <cat-item lemma="à" tags="pr"/>
    </def-cat>

    <def-cat n="vers_pr">
      <cat-item lemma="vers" tags="pr"/>
    </def-cat>

    <def-cat n="continuar"> <!--EO per a la perifrasi continuar +  gerundi-->
      <cat-item lemma="continuar" tags="vblex.*"/>
      <cat-item lemma="seguir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="un_det">
      <cat-item lemma="un" tags="det.ind.*"/>
    </def-cat>

    <def-cat n="un">
      <cat-item lemma="un" tags="det.ind.*"/>
      <cat-item lemma="un" tags="prn.tn.*"/>
      <cat-item lemma="un" tags="num.*"/>
    </def-cat>

    <def-cat n="num_dato">
      <cat-item lemma="1e" tags="num.*"/>
      <cat-item lemma="2" tags="num.*"/>
      <cat-item lemma="3" tags="num.*"/>
      <cat-item lemma="4" tags="num.*"/>
      <cat-item lemma="5" tags="num.*"/>
      <cat-item lemma="6" tags="num.*"/>
      <cat-item lemma="7" tags="num.*"/>
      <cat-item lemma="8" tags="num.*"/>
      <cat-item lemma="9" tags="num.*"/>
      <cat-item lemma="10" tags="num.*"/>
      <cat-item lemma="11" tags="num.*"/>
      <cat-item lemma="12" tags="num.*"/>
      <cat-item lemma="13" tags="num.*"/>
      <cat-item lemma="14" tags="num.*"/>
      <cat-item lemma="15" tags="num.*"/>
      <cat-item lemma="16" tags="num.*"/>
      <cat-item lemma="17" tags="num.*"/>
      <cat-item lemma="18" tags="num.*"/>
      <cat-item lemma="19" tags="num.*"/>
      <cat-item lemma="20" tags="num.*"/>
      <cat-item lemma="21" tags="num.*"/>
      <cat-item lemma="22" tags="num.*"/>
      <cat-item lemma="23" tags="num.*"/>
      <cat-item lemma="24" tags="num.*"/>
      <cat-item lemma="25" tags="num.*"/>
      <cat-item lemma="26" tags="num.*"/>
      <cat-item lemma="27" tags="num.*"/>
      <cat-item lemma="28" tags="num.*"/>
      <cat-item lemma="29" tags="num.*"/>
      <cat-item lemma="30" tags="num.*"/>
      <cat-item lemma="31" tags="num.*"/>
    </def-cat>

    <def-cat n="heure">
      <cat-item lemma="h" tags="n.*"/>
      <cat-item lemma="heure" tags="n.f.pl"/>
    </def-cat>

    <def-cat n="tago">
      <cat-item lemma="lundi" tags="n.*"/>
      <cat-item lemma="mardi" tags="n.*"/>
      <cat-item lemma="mercredi" tags="n.*"/>
      <cat-item lemma="jeudi" tags="n.*"/>
      <cat-item lemma="vendredi" tags="n.*"/>
      <cat-item lemma="samedi" tags="n.*"/>
      <cat-item lemma="dimanche" tags="n.*"/>
    </def-cat>

    <def-cat n="tagoparto">
      <cat-item lemma="matin" tags="n.*"/>
      <cat-item lemma="après-midi" tags="n.*"/>
      <cat-item lemma="soir" tags="n.*"/>
    </def-cat>

    <def-cat n="monato">
      <cat-item lemma="janvier" tags="n.*"/>
      <cat-item lemma="février" tags="n.*"/>
      <cat-item lemma="mars" tags="n.*"/>
      <cat-item lemma="avril" tags="n.*"/>
      <cat-item lemma="mai" tags="n.*"/>
      <cat-item lemma="juin" tags="n.*"/>
      <cat-item lemma="juillet" tags="n.*"/>
      <cat-item lemma="août" tags="n.*"/>
      <cat-item lemma="septembre" tags="n.*"/>
      <cat-item lemma="octobre" tags="n.*"/>
      <cat-item lemma="novembre" tags="n.*"/>
      <cat-item lemma="décembre" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps">
      <cat-item lemma="segonde" tags="n.*"/>
      <cat-item lemma="minute" tags="n.*"/>
      <cat-item lemma="heure" tags="n.*"/>
      <cat-item lemma="jour" tags="n.*"/>
      <cat-item lemma="semaine" tags="n.*"/>
      <cat-item lemma="décade" tags="n.*"/>
      <cat-item lemma="mois" tags="n.*"/>
      <cat-item lemma="trimestre" tags="n.*"/>
      <cat-item lemma="semestre" tags="n.*"/>
      <cat-item lemma="an" tags="n.*"/>
      <cat-item lemma="lustre" tags="n.*"/>
      <cat-item lemma="décennie" tags="n.*"/>
      <cat-item lemma="siècle" tags="n.*"/>
      <cat-item lemma="millénaire" tags="n.*"/>
    </def-cat>

    <def-cat n="nom_da"> <!-- nomoj postulantaj "da" -->
      <cat-item lemma="paire" tags="n.*"/>
      <cat-item lemma="dizaine" tags="n.*"/>
      <cat-item lemma="douzaine" tags="n.*"/>
      <cat-item lemma="quinzaine" tags="n.*"/>
      <cat-item lemma="vingtaine" tags="n.*"/>
      <cat-item lemma="trentaine" tags="n.*"/>
      <cat-item lemma="quarantaine" tags="n.*"/>
      <cat-item lemma="cinquantaine" tags="n.*"/>
      <cat-item lemma="soixantaine" tags="n.*"/>
      <cat-item lemma="soixantedizaine" tags="n.*"/>
      <cat-item lemma="quatrevingtaine" tags="n.*"/>
      <cat-item lemma="quatrevingtdizaine" tags="n.*"/>
      <cat-item lemma="centaine" tags="n.*"/>
      <cat-item lemma="milier" tags="n.*"/>
      <cat-item lemma="million" tags="n.*"/>
      <cat-item lemma="milliard" tags="n.*"/>
      <cat-item lemma="billion" tags="n.*"/>
      <cat-item lemma="quantité" tags="n.*"/>
      <cat-item lemma="mètre" tags="n.*"/>
      <cat-item lemma="décimètre" tags="n.*"/>
      <cat-item lemma="centimètre" tags="n.*"/>
      <cat-item lemma="millimètre" tags="n.*"/>
      <cat-item lemma="micromètre" tags="n.*"/>
      <cat-item lemma="decamètre" tags="n.*"/>
      <cat-item lemma="hectomètre" tags="n.*"/>
      <cat-item lemma="kilomètre" tags="n.*"/>
      <cat-item lemma="mille" tags="n.*"/>
      <cat-item lemma="lieue" tags="n.*"/>
      <cat-item lemma="lieue" tags="n.*"/>
      <cat-item lemma="année-lumière" tags="n.*"/>
      <cat-item lemma="mégaparsec" tags="n.*"/>
      <cat-item lemma="hectare" tags="n.*"/>
      <cat-item lemma="litre" tags="n.*"/>
      <cat-item lemma="décilitre" tags="n.*"/>
      <cat-item lemma="centilitre" tags="n.*"/>
      <cat-item lemma="millilitre" tags="n.*"/>
      <cat-item lemma="microlitre" tags="n.*"/>
      <cat-item lemma="décalitre" tags="n.*"/>
      <cat-item lemma="héctolitre" tags="n.*"/>
      <cat-item lemma="gramme" tags="n.*"/>
      <cat-item lemma="décigramme" tags="n.*"/>
      <cat-item lemma="centigramme" tags="n.*"/>
      <cat-item lemma="milligramme" tags="n.*"/>
      <cat-item lemma="microgramme" tags="n.*"/>
      <cat-item lemma="décagramme" tags="n.*"/>
      <cat-item lemma="hectogramme" tags="n.*"/>
      <cat-item lemma="kilogramme" tags="n.*"/>
      <cat-item lemma="quintal" tags="n.*"/>
      <cat-item lemma="tonne" tags="n.*"/>
      <cat-item lemma="watt" tags="n.*"/>
      <cat-item lemma="kilowatt" tags="n.*"/>
      <cat-item lemma="mégawatt" tags="n.*"/>
      <cat-item lemma="bit" tags="n.*"/>
      <cat-item lemma="kilobit" tags="n.*"/>
      <cat-item lemma="mégabit" tags="n.*"/>
      <cat-item lemma="byte" tags="n.*"/>
      <cat-item lemma="kilobyte" tags="n.*"/>
      <cat-item lemma="mégabyte" tags="n.*"/>
      <cat-item lemma="gigabyte" tags="n.*"/>
      <cat-item lemma="térabyte" tags="n.*"/>
      <cat-item lemma="octet" tags="n.*"/>
      <cat-item lemma="kilooctet" tags="n.*"/>
      <cat-item lemma="mégaoctet" tags="n.*"/>
      <cat-item lemma="gigaoctet" tags="n.*"/>
      <cat-item lemma="téraoctet" tags="n.*"/>
      <cat-item lemma="calorie" tags="n.*"/>
      <cat-item lemma="kilocalorie" tags="n.*"/>
      <cat-item lemma="km²" tags="n.*"/>
      <cat-item lemma="m²" tags="n.*"/>
      <cat-item lemma="km" tags="n.*"/>
      <cat-item lemma="m" tags="n.*"/>
      <cat-item lemma="l" tags="n.*"/>
      <cat-item lemma="dl" tags="n.*"/>
      <cat-item lemma="cl" tags="n.*"/>
      <cat-item lemma="ml" tags="n.*"/>
      <cat-item lemma="kg" tags="n.*"/>
      <cat-item lemma="g" tags="n.*"/>
      <cat-item lemma="dg" tags="n.*"/>
      <cat-item lemma="cg" tags="n.*"/>
      <cat-item lemma="mg" tags="n.*"/>
      <cat-item lemma="W" tags="n.*"/>
      <cat-item lemma="kW" tags="n.*"/>
      <cat-item lemma="MW" tags="n.*"/>
      <cat-item lemma="b" tags="n.*"/>
      <cat-item lemma="kb" tags="n.*"/>
      <cat-item lemma="Mb" tags="n.*"/>
      <cat-item lemma="B" tags="n.*"/>
      <cat-item lemma="KB" tags="n.*"/>
      <cat-item lemma="MB" tags="n.*"/>
      <cat-item lemma="GB" tags="n.*"/>
      <cat-item lemma="TB" tags="n.*"/>
      <cat-item lemma="o" tags="n.*"/>
      <cat-item lemma="Ko" tags="n.*"/>
      <cat-item lemma="Mo" tags="n.*"/>
      <cat-item lemma="Go" tags="n.*"/>
      <cat-item lemma="To" tags="n.*"/>
      <cat-item lemma="cal" tags="n.*"/>
      <cat-item lemma="kcal" tags="n.*"/>
    </def-cat>

    <def-cat n="nom_dist"> <!-- nomoj postulantaj "el" en difinitaj kuntekstoj -->
      <cat-item lemma="mètre" tags="n.*"/>
      <cat-item lemma="décimètre" tags="n.*"/>
      <cat-item lemma="centimètre" tags="n.*"/>
      <cat-item lemma="millimètre" tags="n.*"/>
      <cat-item lemma="micromètre" tags="n.*"/>
      <cat-item lemma="decamètre" tags="n.*"/>
      <cat-item lemma="hectomètre" tags="n.*"/>
      <cat-item lemma="kilomètre" tags="n.*"/>
      <cat-item lemma="mille" tags="n.*"/>
      <cat-item lemma="lieue" tags="n.*"/>
      <cat-item lemma="lieue" tags="n.*"/>
      <cat-item lemma="année-lumière" tags="n.*"/>
      <cat-item lemma="mégaparsec" tags="n.*"/>
    </def-cat>

    <def-cat n="debut_fin">
      <cat-item lemma="début" tags="n.*"/>
      <cat-item lemma="fin" tags="n.*"/>
      <cat-item lemma="fin" tags="adj.*"/> <!-- misanalizo -->
    </def-cat>

  </section-def-cats>


  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
      <attr-item tags="np.al"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_acr">
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="pref"/>
      <attr-item tags="prn.itg"/> <!-- quel -> kiu -->
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.geradj"/>
      <attr-item tags="vbtr.pp"/>
      <attr-item tags="vbttr.geradj"/>
      <attr-item tags="vbntr.pp"/>
      <attr-item tags="vbnttr.geradj"/>
      <attr-item tags="vbtr_ntr.pp"/>
      <attr-item tags="vbttr_ntr.geradj"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbser.geradj"/>
    </def-attr>

    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
      <attr-item tags="num.ord"/>
    </def-attr>

    <def-attr n="a_det2">
      <attr-item tags="dem"/>
      <attr-item tags="ind"/>
      <attr-item tags="def"/>
      <attr-item tags="pos"/>
      <attr-item tags="qnt"/>
      <attr-item tags="itg"/>
      <attr-item tags="ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="a_def_pos">
      <attr-item tags="def"/>
      <attr-item tags="pos"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
      <attr-item tags="num.ord"/>
    </def-attr>

    <def-attr n="a_verb2"> <!-- mirem si és pronominal a la macro tipus_verbs -->
      <attr-item tags="vblex"/>
      <attr-item tags="vblex.pron"/>
      <attr-item tags="vbtr"/>
      <attr-item tags="vbntr"/>
      <attr-item tags="vbtr_ntr"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbtr"/>
      <attr-item tags="vbntr"/>
      <attr-item tags="vbtr_ntr"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>

    <def-attr n="a_cnjcoo">
      <attr-item tags="cnjcoo"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="cnjadv"/>
      <attr-item tags="adv.itg"/>
      <attr-item tags="rel.adv"/>
    </def-attr>

    <def-attr n="a_adv_cnj">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="cnjadv"/>
      <attr-item tags="adv.itg"/>
      <attr-item tags="rel.adv"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbtr.pp"/>
      <attr-item tags="vbntr.pp"/>
      <attr-item tags="vbtr_ntr.pp"/>
      <attr-item tags="vblex.pron.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
      <attr-item tags="prn.pro"/>
      <attr-item tags="prn.pro.ref"/>
    </def-attr>

    <def-attr n="a_pos">
      <attr-item tags="prn.pos"/>
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="obj"/>
      <attr-item tags="dat"/>
      <attr-item tags="tn"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
      <attr-item tags="ref"/>
      <attr-item tags="rel"/><!--EO-->
      <attr-item tags="nn"/><!--EO-->
      <attr-item tags="adv"/><!--EO-->
      <attr-item tags="adj"/><!-- autrui -> alia -->
      <attr-item tags="rel"/><!--EO-->
    </def-attr>

    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="cas"> <!--EO-->
      <attr-item tags="nom"/>
      <attr-item tags="nom2"/>
      <attr-item tags="acc"/>
      <attr-item tags="sense"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="prs"/>
      <attr-item tags="pres"/>
      <attr-item tags="past"/>

      <attr-item tags="pp"/><!-- ? -->
      <attr-item tags="pp2"/><!-- ? -->
      <attr-item tags="pp3"/><!-- ? -->
      <attr-item tags="ger"/><!-- ante -->
      <attr-item tags="gerpast"/><!-- inte -->
      <attr-item tags="inf"/><!-- ? -->

    </def-attr>

    <def-attr n="a_det_le">
      <attr-item tags="det.def.m.sg"/>
    </def-attr>

    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>

  </section-def-attrs>

  <section-def-vars>
    <def-var n="case"/>
    <def-var n="changecase"/>
    <def-var n="lemapos"/>
    <def-var n="nombre"/>
    <def-var n="genere"/>
    <def-var n="genere2"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/>
    <def-var n="lema"/>
    <def-var n="EOS"/>
    <def-var n="auxiliar"/>
    <def-var n="tipus_verb"/>
    <def-var n="tipus_verb2"/>
    <def-var n="vegada"/>
    <def-var n="nprep"/>
    <def-var n="npron"/>
    <def-var n="nadv"/>
    <def-var n="ncnj"/>
    <def-var n="ndet"/>
    <def-var n="nsent"/>
    <def-var n="saint"/>
    <def-var n="test"/>
 <def-var n="xxx"/>
 <def-var n="a1"/>
 <def-var n="a2"/>
 <def-var n="a3"/>
  </section-def-vars>

  <section-def-lists>

  <def-list n="detsprep"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="pli da"/>
    <list-item v="iom da"/>
    <list-item v="la plimulto da"/>
    <list-item v="tro da"/>
    <list-item v="malpli da"/>
    <list-item v="ne multe da"/>
    <list-item v="sufiĉe da"/>
    <list-item v="ne multe da"/>
    <list-item v="tiom da"/>
    </def-list>

  <def-list n="qui"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="qui"/>
    </def-list>

  <def-list n="quin"> <!-- BCN EO per marcar els que han d'anar en acc (dets int preverbals)-->
    <list-item v="quin"/>
    </def-list>

  <def-list n="moviment"> <!-- BCN EO-->
    <list-item v="aller"/>
    <list-item v="venir"/>
    <list-item v="introduire"/>
    <list-item v="entrer"/>
    <list-item v="mettre"/>
    <list-item v="insérer"/>
    <list-item v="traduire"/>
    <list-item v="ajouter"/>
    <list-item v="enlever"/>
    <list-item v="tomber"/>
    <list-item v="monter"/>
    <list-item v="descendre"/>
    <list-item v="glisser"/>
    <list-item v="passer"/>
    <list-item v="arriver"/>
    <list-item v="voler"/>
    <list-item v="courir"/>
    <list-item v="marcher"/>
    <list-item v="déménager"/>
    <list-item v="diviser"/>
    <list-item v="subdiviser"/>
    <list-item v="partager"/>
    <list-item v="déplacer"/>
    <list-item v="plonger"/>
    <list-item v="sauter"/>
    <list-item v="lancer"/>
    <list-item v="élancer"/>
    <list-item v="relancer"/>
    <list-item v="replonger"/>
    <list-item v="lever"/>
    <list-item v="élever"/>
    <list-item v="insérer"/>
    <list-item v="réinsérer"/>
    <list-item v="retourner"/>
    <list-item v="rentrer"/>
    <list-item v="revenir"/>
    <list-item v="réintroduire"/>
    <list-item v="retomber"/>
    <list-item v="remonter"/>
    <list-item v="redescendre"/>
    <list-item v="jeter"/>
    <list-item v="transformer"/>
    <list-item v="métamorphoser"/>
    <list-item v="konduki"/>
    <list-item v="veturigi"/>
    <list-item v="forsendi"/>
<!--    <list-item v="remettre"/> -->
    </def-list>

  <def-list n="laqualcosa">
    <list-item v="ce qui"/>
    </def-list>

  <def-list n="plaire"> <!-- BCN EO per a la inversio argumental-->
    <list-item v="plaire"/>
<!--
    <list-item v="encantar"/>
    <list-item v="plaure"/>
    <list-item v="preocupar-se"/>
    <list-item v="interesar-se"/>
    <list-item v="inquietar-se"/>
-->
    </def-list>

  <def-list n="volition"> <!-- BCN EO verbs que porten KE -->
    <list-item v="vouloir"/>
    <list-item v="proposer"/>
    <list-item v="exiger"/>
    <list-item v="réclamer"/>
    <list-item v="demander"/>
    <list-item v="redemander"/>
    <list-item v="suggérer"/>
    <list-item v="falloir"/>
    </def-list>

    <def-list n="part_sing">
      <list-item v="eau"/>
      <list-item v="beurre"/>
      <list-item v="limonade"/>
      <list-item v="vin"/>
      <list-item v="bière"/>
      <list-item v="viande"/>
      <list-item v="pain"/>
      <list-item v="chance"/>
      <list-item v="sucre"/>
      <list-item v="plaisir"/>
    </def-list>

    <def-list n="predikativo"> <!-- verboj kun strukturo kiel "mi estimas bonA lian laboron" -->
      <list-item v="estimi"/>
      <list-item v="juĝi"/>
      <list-item v="konsideri"/>
      <list-item v="opinii"/>
      <list-item v="taksi"/>
      <list-item v="trovi"/>
    </def-list>

    <def-list n="v_objekto_nehoma"> <!-- verboj kiel rekta objekto estas nehoma; tiel je le fais -> mi faras ĝin (anstataŭ: mi faras lin) -->
      <list-item v="altigi"/>
      <list-item v="malaltigi"/>
      <list-item v="redukti"/>
      <list-item v="kreskigi"/>
      <list-item v="diri"/>
      <list-item v="fari"/>
      <list-item v="kanti"/>
      <list-item v="kuiri"/>
      <list-item v="legi"/>
      <list-item v="ludi"/>
      <list-item v="paroli"/>
      <list-item v="rakonti"/>
      <list-item v="skribi"/>
      <list-item v="scii"/>
    </def-list>

  </section-def-lists>


  <section-def-macros>

    <def-macro n="tipus_verbs" npar="1"> <!-- tots els verbs passen per aqui -->
      <choose>
        <when>
          <test>
          <in>
         <clip pos="1" side="sl" part="lemh"/>
         <list n="plaire"/>
          </in>
          </test>
          <let>
            <var n="tipus_verb"/>
            <lit-tag v="like"/>
          </let>
        </when>

        <when>
            <test>
              <in>
                 <clip pos="1" side="sl" part="lemh"/>
                 <list n="moviment"/>
              </in>
            </test>
         <let>
          <var n="tipus_verb"/>
          <lit-tag v="moviment"/>
        </let>
        </when>

    <when>
    <test>
      <in>
         <clip pos="1" side="sl" part="lemh"/>
         <list n="volition"/>
      </in>
    </test>
    <let>
     <var n="tipus_verb"/>
     <lit-tag v="volition"/>
     </let>
    </when>

    <when>
      <test>
        <equal>
          <clip pos="1" side="sl" part="a_verb2"/>
          <lit-tag v="vblex.pron"/>
        </equal>
      </test>
      <let>
        <var n="tipus_verb2"/>
        <lit-tag v="pron"/>
      </let>
    </when>

    <when>
    <test>
      <in>
         <clip pos="1" side="tl" part="lemh"/>
         <list n="predikativo"/>
      </in>
    </test>
    <let>
     <var n="tipus_verb"/>
     <lit-tag v="predikativo"/>
     </let>
    </when>

    <otherwise>
      <let>
        <var n="tipus_verb"/>
        <lit-tag v="res"/>
      </let>
    </otherwise>
  </choose>
</def-macro>


  <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format. Cal posar aquesta funció en les regles en què desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conté format cal conservar-la, si no en conté cal eliminar-la perquè no apareguin dos espais seguits. -->
     	<choose>
     	  <when>
     	    <test><not><equal><b pos="1"/><lit v=" "/></equal></not></test>
            <out>
              <b pos="1"/>
            </out>
          </when>     	
     	</choose>
  </def-macro>


  <def-macro n="nom_cas" npar="1"> <!-- EO: marca els SN que si són objecte estaran en accusatiu (les regles del t2x s'encarreguen; també marca els dets interrogatius 'quin' per a tractar-los al t2x)-->
        <choose>
          <when>
            <test>
        <or>
                 <in>
                 <clip pos="1" side="tl" part="lem"/>
                 <list n="detsprep"/> <!-- llista de dets amb preposició (quantificadors) -->
                 </in>
                 <in>
                 <clip pos="1" side="sl" part="lem"/>
                 <list n="qui"/> <!-- per a pronoms  -->
                 </in>
        </or>
            </test>
              <let>
                <var n="changecase"/>
                <lit-tag v="sense"/>
              </let>
          </when>

          <when>
            <test>
                 <in>
                 <clip pos="1" side="sl" part="lem"/>
                 <list n="quin"/> <!-- per a determinats interrogatius (van davant del verb) -->
                 </in>
            </test>
              <let>
                <var n="changecase"/>
                <lit-tag v="nom2"/>
              </let>
          </when>
          <otherwise>
              <let>
                <var n="changecase"/>
                <lit-tag v="nom"/>
              </let>
          </otherwise>
        </choose>
              <let>
                <var n="case"/>
                <lit-tag v="nom"/>
              </let>
    </def-macro>

<!--
    <def-macro n="nombre_nom" npar="1">
      <let>
        <var n="nombre"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
        </when>
       <when>
        <test>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <lit-tag v="sg"/>
          </let>
        </when>

        <otherwise>
          <let>
            <var n="nombre"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>
-->

<def-macro n="set_gxi" npar="2"> <!-- ŝanĝas 'le/la' (tradukataj kiel 'lin') al 'gxin' cxe verboj, kies rekta objekto estas nehoma -->
   <choose>
        <when>
          <test>
            <and>
              <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p3"/></equal>
              <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                   <in caseless="yes">
                       <clip pos="2" side="tl" part="lemh"/>
                       <list n="v_objekto_nehoma"/>
                     </in>
            </and>
          </test>
          <let><clip pos="1" side="tl" part="gen"/><lit-tag v="nt"/></let>
        </when>
   </choose>
<!--
<out>
<chunk name="pp">
<tags>
<tag><lit-tag v="a"/></tag>
<tag><clip pos="1" side="sl" part="pers"/></tag>
<tag><lit-tag v="b"/></tag>
<tag><clip pos="1" side="sl" part="nbr"/></tag>
<tag><lit-tag v="c"/></tag>
<tag><clip pos="1" side="tl" part="lemh"/></tag>
<tag><lit-tag v="d"/></tag>
<tag><clip pos="1" side="tl" part="gen"/></tag>
<tag><lit-tag v="e"/></tag>
</tags>
<b/>
</chunk>
</out>
-->
</def-macro>

  <def-macro n="prn_nosubj" npar="2"> 
      <choose>
        <when>
          <test>
            <equal><clip pos="1" side="tl" part="tipus_prn"/><lit-tag v="adv"/></equal>
          </test>
          <out>
            <chunk name="adv" case="caseFirstWord">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="tl" part="a_adv"/>
              </lu>
            </chunk>
          </out>
        </when>

        <when>
          <test>
            <equal><clip pos="1" side="sl" part="lem"/><lit v="n"/></equal>
          </test>
          <out>
            <chunk name="prn_en">
              <tags>
                <tag><lit-tag v="SN"/></tag>
                <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                <tag><var n="nombre"/></tag>
                <tag><var n="case"/></tag>
                <tag><var n="changecase"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="tl" part="a_prn"/>
                <lit-tag v="2"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="3"/>
              </lu>
            </chunk>
          </out>
        </when>

        <otherwise>
          <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
          <call-macro n="set_gxi"><with-param pos="1"/><with-param pos="2"/></call-macro>
          <out>
            <chunk name="prn_nosubj">
              <tags>
                <tag><lit-tag v="SN"/></tag>
                <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                <tag><var n="nombre"/></tag>
                <tag><var n="case"/></tag>
                <tag><var n="changecase"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="tl" part="a_prn"/>
                <lit-tag v="2"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="3"/>
              </lu>
            </chunk>
          </out>
        </otherwise>
      </choose>
  </def-macro>


  <def-macro n="prn_subj" npar="1"> 
        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="subj"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
  </def-macro>


  <def-macro n="prn_dat" npar="1"> 
      <choose>
        <when>
          <test>
            <equal><clip pos="1" side="tl" part="tipus_prn"/><lit-tag v="adv"/></equal>
          </test>
          <out>
            <chunk name="adv" case="caseFirstWord">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="tl" part="a_adv"/>
              </lu>
            </chunk>
          </out>
        </when>

        <when>
          <test>
            <equal><clip pos="1" side="sl" part="lem"/><lit v="le"/></equal>
          </test>
          <out>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.tn.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tio"/>
              <lit-tag v="prn.tn.3.4"/>
            </lu>
          </chunk>
          </out>
        </when>

        <when>
          <test>
            <equal><clip pos="1" side="sl" part="lem"/><lit v="en"/></equal>
          </test>
          <!-- ni fajfas pri eligo, kvankam aperos kromspaco -->
        </when>

        <otherwise>
          <let><clip pos="1" side="tl" part="tipus_prn"/><lit-tag v="dat"/></let>
          <out>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
            </lu>
          </chunk>
          </out>
        </otherwise>
      </choose>
  </def-macro>


<!-- nombro -->

    <def-macro n="default_nombro" npar="0"> <!-- ŝanĝas nombre al sg, se ĝi estas ND aŭ sp -->
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <var n="nombre"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <var n="nombre"/>
                <lit-tag v="sp"/>
              </equal>
              <equal>
                <var n="nombre"/>
                <lit-tag v=""/>
              </equal>
            </or>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
        </when>
      </choose>
    </def-macro>


    <def-macro n="nombro1" npar="1">
      <let><var n="nombre"/><lit-tag v="sp"/></let>
      <choose>
        <when>
          <test>
<!--
            <not>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v=""/>
              </equal>
            </not>
-->
            <or>
              <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="sg"/></equal>
              <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="pl"/></equal>
            </or>
          </test>
          <let><var n="nombre"/><clip pos="1" side="tl" part="nbr"/></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="nombro2" npar="2">
        <!-- par1 = NOM (prioritata), par2 = DET/ADJ (malprioritata); eliro: nombre -->
        <!-- ĝi ŝanĝas <clip pos="1" side="tl" part="nbr"/> por eventuala konsulto en makrooj nombro3, 4 ktp. -->
      <let>
        <var n="nombre"/>
        <lit v="sp"/>
      </let>

      <choose>
        <when> <!-- okazo 1: se la nombroj egalas, ni elektas tiun ĉi -->
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="nbr"/>
            </equal>
          </test>
          <let>
            <var n="nombre"/>
            <clip pos="2" side="tl" part="nbr"/>
          </let>
<let>
<var n="xxx"/>
<lit-tag v="1"/>
</let>
        </when>

        <when> <!-- okazo 2: se la unua nombro estas nedifinita -->
          <test>
              <or>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
          </test>
          <choose>
            <when> <!-- 2.1: se dua nombro estas difinita, ni elektas ĝin -->
              <test>
                <or>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="nbr"/>
              </let>
              <let>
                <var n="nombre"/>
                <clip pos="2" side="tl" part="nbr"/>
              </let>
<let>
<var n="xxx"/>
<lit-tag v="2"/>
</let>
            </when>
            <when> <!-- 2.2: se dua elemento estas nombro, ni esploras ĝin -->
              <test>
                <equal>
                  <clip pos="2" side="sl" part="a_num"/>
                  <lit-tag v="num.ciph"/>
                </equal>
              </test>
<let>
<var n="xxx"/>
<lit-tag v="4a"/>
</let>
              <choose>
                <when> <!-- 2.2.1: se la nombro estas 1, ni elektas singularon -->
                  <test>
                    <equal>
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="1"/>
                    </equal>
                  </test>
                  <let>
                    <var n="nombre"/>
                    <lit-tag v="sg"/>
                  </let>
                </when>
                <otherwise> <!-- 2.2.2: aliokaze, ni elektas pluralon -->
                  <let>
                    <var n="nombre"/>
                    <lit-tag v="pl"/>
                  </let>
                </otherwise>
              </choose>
            </when>
            <otherwise> <!-- 2.3: aliokaze, ni elektas la nombron de la dua elemento -->
              <let>
                <var n="nombre"/>
                <clip pos="2" side="tl" part="nbr"/>
              </let>
<let>
<var n="xxx"/>
<concat>
<lit-tag v="3a"/>
<clip pos="1" side="sl" part="lem"/>
<clip pos="2" side="sl" part="lem"/>
</concat>
</let>
            </otherwise>
          </choose>
        </when>

        <when> <!-- okazo 3: se la dua nombro estas nedifinita -->
          <test>
            <or>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
            </or>
          </test>
          <choose>
            <when> <!-- 3.1: se unua elemento estas nombro, ni esploras ĝin -->
              <test>
                <equal>
                  <clip pos="1" side="sl" part="a_num"/>
                  <lit-tag v="num.ciph"/>
                </equal>
              </test>
<let>
<var n="xxx"/>
<lit-tag v="4b"/>
</let>
              <choose>
              <when> <!-- 3.1.1: se la nombro estas 1, ni elektas singularon -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="1"/>
                  </equal>
                </test>
                <let>
                  <var n="nombre"/>
                  <lit-tag v="sg"/>
                </let>
              </when>
              <otherwise> <!-- 3.1.2: aliokaze, ni elektas pluralon -->
                <let>
                  <var n="nombre"/>
                  <lit-tag v="pl"/>
                </let>
              </otherwise>
              </choose>
            </when>
            <otherwise> <!-- 3.2: aliokaze, ni elektas la nombron de la unua elemento -->
              <let>
                <var n="nombre"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
<let>
<var n="xxx"/>
<lit-tag v="3b"/>
</let>
            </otherwise>
          </choose>
        </when>

        <otherwise> <!-- 4: aliokaze, ni elektas la nombron de la unua elemento (eblus de la dua: io ajn) -->
          <let>
            <var n="nombre"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
<let>
<var n="xxx"/>
<lit-tag v="5"/>
</let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="nombro3" npar="3"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
    </def-macro>

    <def-macro n="nombro4" npar="4"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
    </def-macro>

    <def-macro n="nombro5" npar="5"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
    </def-macro>

    <def-macro n="nombro6" npar="6"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro5">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
    </def-macro>


    <def-macro n="kunordigo_nbr" npar="2">
       <choose>
          <when>
            <test>
              <and>
                <or>
                  <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="sp"/></equal>
                  <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="ND"/></equal>
                </or>
                <or>
                  <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="pl"/></equal>
                </or>
              </and>
            </test>
            <let><clip pos="2" side="tl" part="nbr"/><clip pos="1" side="tl" part="nbr"/></let>
         </when>
       </choose>
       <choose>
          <when>
            <test>
              <and>
                <or>
                  <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="sp"/></equal>
                  <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="ND"/></equal>
                </or>
                <or>
                  <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="pl"/></equal>
                </or>
              </and>
            </test>
            <let><clip pos="1" side="tl" part="nbr"/><clip pos="2" side="tl" part="nbr"/></let>
        </when>
      </choose>
  </def-macro>

<!-- genro -->

    <def-macro n="genro_tl" npar="1"> <!-- atribuas al la genro de la esperanto-vorto la enhavon de la variable 'genere', se tiu esperanto-vorto mem havas genron -->
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v=""/>
              </equal>
            </not>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genere"/>
          </let>
        </when>
      </choose>
    </def-macro>


    <def-macro n="genro_tl2" npar="1">
<!-- atribuas al la variabloj 'genere' kaj 'genere2' la finajn valorojn, kiujn ili devas havi en, respektive, la ĉapo kaj la interno de la ĉunko:
- 'genere' (en la ĉapo) ĉiam devas havi valoron, ĉar ĝia pozicio (la dua en la ĉapo) devas esti okupata. Se la esperanto-vorto havas ĝenron, ĝi havos ties ĉi; se ne, ĝi havos tiun de la font-lingvo
- 'genere2' (en la interno) devas havi valoron nur, se la esperanto-vorto havas ĝenron. Se la genro de la SN estas solvita, ĝi havos tiun ĉi valoron; se ne, ĝi havos la valoron '2', t.e. ligo al la ĉapo. Ne indas ĉiam meti ligon al la ĉapo, ĉar tiam okazas, ke aŭ ni ne povas kunigi (en sekvaj ŝtupoj) en unu SN-n 'livre et maison' (malsamgenraj en la fontlingvo, sed sengenraj en esperanto) aŭ 'garçons et filles' (malsamgenraj en ambaŭ lingvoj)
-->
      <choose>
        <when>
          <test> <!-- genro en esperanto solvita -->
            <or>
              <equal><clip pos="1" side="tl" part="gen"/><lit-tag v="m"/></equal>
              <equal><clip pos="1" side="tl" part="gen"/><lit-tag v="f"/></equal>
            </or>
          </test>
          <let>
            <var n="genere2"/>
            <clip pos="1" side="tl" part="gen"/>
          </let>
        </when>
        <when>
          <test> <!-- genro en esperanto, sed ne solvita -->
              <equal><clip pos="1" side="tl" part="gen"/><lit-tag v="mf"/></equal>
          </test>
          <let>
            <var n="genere2"/>
            <lit-tag v="2"/>
          </let>
        </when>
        <otherwise> <!-- sen genro en esperanto -->
          <let>
            <var n="genere2"/>
            <lit v=""/>
          </let>
          <let>
            <var n="genere"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="default_genro" npar="0"> <!-- ŝanĝas genere al m, se ĝi estas mf -->
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <var n="genere"/>
                <lit-tag v="mf"/>
              </equal>
              <equal>
                <var n="genere"/>
                <lit-tag v=""/>
              </equal>
            </or>
          </test>
          <let>
            <var n="genere"/>
            <lit-tag v="m"/>
          </let>
        </when>
      </choose>
    </def-macro>


    <def-macro n="genro1" npar="1">
      <let>
        <var n="genere"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v=""/>
              </equal>
            </not>
          </test>
          <let>
            <var n="genere"/>
            <clip pos="1" side="tl" part="gen"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="genro2" npar="2">
        <!-- par1 = NOM (prioritata), par2 = DET/ADJ (malprioritata); eliro: genere -->
        <!-- ĝi ŝanĝas <clip pos="1" side="tl" part="gen"/> por eventuala konsulto en makrooj genro3, 4 ktp. -->
<!--
<let><var n="xxx"/><concat>
        <var n="xxx"/><lit-tag v="="/><clip pos="1" side="tl" part="gen"/><lit-tag v=", "/><clip pos="2" side="tl" part="gen"/><lit-tag v="; "/>
</concat></let>
-->
      <let>
        <var n="genere"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="gen"/>
              <clip pos="2" side="sl" part="gen"/>
            </equal>
          </test>
          <let>
            <var n="genere"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v=""/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="m"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="f"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <clip pos="1" side="sl" part="gen"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
          <let>
            <var n="genere"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="2" side="sl" part="gen"/>
                <lit-tag v=""/>
              </equal>
              <equal>
                <clip pos="2" side="sl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="genere"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genere"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="genro3" npar="3"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: genere -->
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
    </def-macro>

    <def-macro n="genro4" npar="4"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: genere -->
        <call-macro n="genro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
    </def-macro>

    <def-macro n="genro5" npar="5"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: genere -->
        <call-macro n="genro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
    </def-macro>

    <def-macro n="genro6" npar="6"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: genere -->
        <call-macro n="genro5">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
    </def-macro>


    <def-macro n="firstWord" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="a_np_acr"/>
              <lit v=""/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="EOS"/>
                  <lit v="true"/>
                </equal>
              </test>
              <modify-case>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="aa"/>
              </modify-case>
              <let>
                <var n="caseFirstWord"/>
                <lit v="Aa"/>
              </let>
            </when>
          </choose>
        </when>
        <otherwise>
          <let>
            <var n="caseFirstWord"/>
            <lit v="aa"/>
          </let>
        </otherwise>
      </choose>
      <let>
        <var n="EOS"/>
        <lit v="false"/>
      </let>
    </def-macro>


    <def-macro n="set_temps" npar="1">
        <choose>
              <when>  <!-- traduccions a present -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pres"/>
                </let>
              </when>
              <when>           <!-- traduccions a passat -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>

              <when>           <!-- traduccions a futur -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
              </when>

              <when>           <!-- traduccions a condicional -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
              </when>

              <when>           <!-- traduccions a gerundi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
              </when>
            </choose>
    </def-macro>

    <def-macro n="set_temps2" npar="2">
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!--digué -->
                    </equal>
                </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
             </choose>
    </def-macro>

    <def-macro n="set_noimp" npar="1"> <!-- imp -> pres -->
        <choose>
              <when>
                <test>
                    <equal><clip pos="1" side="sl" part="temps"/><lit-tag v="imp"/></equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/><lit-tag v="pres"/></let>
              </when>
        </choose>
    </def-macro>

    <def-macro n="set_nous_vous" npar="1"> <!-- nous.prn.tn -> nous.prn.dat -->
        <choose>
              <when>
                <test>
                    <equal><clip pos="1" side="sl" part="tipus_prn"/><lit-tag v="tn"/></equal>
                </test>
                <let><clip pos="1" side="tl" part="tipus_prn"/><lit-tag v="dat"/></let>
              </when>
            </choose>
    </def-macro>

    <def-macro n="out_noimp_rue_place" npar="1"> <!-- imp -> pres -->
        <choose>
          <when>
            <test>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="ruer"/></equal>
            </test>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.f.sg.nom.nom"/></tag>
                </tags>
                <lu>
                  <lit v="strato"/>
                  <lit-tag v="n.3.4"/>
                </lu>
              </chunk>
            </out>
          </when>
          <when>
            <test>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="placer"/></equal>
            </test>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.f.sg.nom.nom"/></tag>
                </tags>
                <lu>
                  <lit v="placo"/>
                  <lit-tag v="n.3.4"/>
                </lu>
              </chunk>
            </out>
          </when>
          <when>
            <test>
              <and>
                <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="marier"/></equal>
                <equal><case-of pos="1" side="sl" part="lem"/><lit v="Aa"/></equal>
              </and>
            </test>
            <out>
              <chunk name="ant" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.f.sg.nom.nom"/></tag>
                </tags>
                <lu>
                  <lit v="Marie"/>
                  <lit-tag v="np.ant.f.sg.4"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="tipus_verbs">
              <with-param pos="1"/>
            </call-macro>
            <call-macro n="set_noimp">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="verbcj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                  <tag><var n="tipus_verb2"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <lit-tag v="3"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
    </def-macro>

<def-macro n="pli_plej1a" npar="1"> <!-- ŝanĝas 'plus' ('pli') al 'plej' -->
   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="plus"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="moins"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="malplej"/>
          </let>
        </when>
   </choose>
</def-macro>

<def-macro n="pli_plej1b" npar="2"> <!-- ŝanĝas 'plus' ('pli') al 'plej' post det.def aŭ det.pos -->
   <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="sl" part="a_def_pos"/>
                <lit-tag v="def"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="a_def_pos"/>
                <lit-tag v="pos"/>
              </equal>
            </or>
          </test>
          <call-macro n="pli_plej1a">
            <with-param pos="2"/>
          </call-macro>
        </when>
        <otherwise> <!-- korekto de misanalizo 'plus' = n -->
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="plus"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="pli"/>
              </let>
            </when>
          </choose>
        </otherwise>
   </choose>
</def-macro>

<def-macro n="pli_plej2a" npar="1"> <!-- ŝanĝas 'meilleur' ('pli bona') al 'plej bona' -->
   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="meilleur"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej bona"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="pire"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej malbona"/>
          </let>
        </when>
   </choose>
</def-macro>

<def-macro n="pli_plej2b" npar="2"> <!-- ŝanĝas 'meilleur' ('pli bona') al 'plej bona' post det.def aŭ det.pos -->
   <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="sl" part="a_def_pos"/>
                <lit-tag v="def"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="a_def_pos"/>
                <lit-tag v="pos"/>
              </equal>
            </or>
          </test>
          <call-macro n="pli_plej2a">
            <with-param pos="2"/>
          </call-macro>
        </when>
   </choose>
</def-macro>

<def-macro n="m_plus_moins" npar="1"> <!-- ŝanĝas cellemon, se 'plus' aŭ 'moins', pro misanalizo -->
   <choose>
     <when>
      <test>
       <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="plus"/></equal>
      </test>
        <let><clip pos="1" side="tl" part="lem"/><lit v="pli"/></let>
     </when>
     <when>
      <test>
       <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="moins"/></equal>
      </test>
        <let><clip pos="1" side="tl" part="lem"/><lit v="malpli"/></let>
     </when>
   </choose>
</def-macro>

<def-macro n="set_sxati" npar="1"> <!-- ŝanĝas 'aimer' ('ami') al 'ŝati' -->
   <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="aimer"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="ŝati"/></let>
        </when>
   </choose>
</def-macro>

<!-- tiu ĉi makroo estas vokata kiam la koncerna verbo antaŭas infinitivon.
En tiuj okazoj ni ŝanĝas la tradukon de kelkaj verboj por aliaj pli probable ĝustaj -->
<def-macro n="set_peti" npar="1">
   <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="demander"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="peti"/></let>
        </when>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="redemander"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="repeti"/></let>
        </when>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="rendre"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="igi"/></let>
        </when>
   </choose>
</def-macro>

<!-- tiu ĉi makroo estas vokata por ŝanĝi la tradukon de adjektivoj kun malsama traduko, kiam ili
antaŭas la nomon -->
<def-macro n="set_antaux_adj" npar="1"> 
   <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="ancien"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="eksa"/></let>
        </when>
   </choose>
</def-macro>

<def-macro n="set_plu" npar="1"> <!-- ŝanĝas 'plus' ('pli') al 'plu' -->
   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="plus"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plu"/>
          </let>
        </when>
   </choose>
</def-macro>

<def-macro n="m_verb_adv" npar="1">
        <choose>
          <when>
            <test>
              <equal><clip pos="1" side="sl" part="lem"/><lit v="faillir"/></equal>
            </test>
            <let><var n="lema"/><lit v="preskaŭ"/></let>
          </when>
          <when>
            <test>
              <equal><clip pos="1" side="sl" part="lem"/><lit v="s'empresser"/></equal>
            </test>
            <let><var n="lema"/><lit v="tuj"/></let>
          </when>
          <otherwise>
            <let><var n="lema"/><lit v="daŭre"/></let>
          </otherwise>
        </choose>
</def-macro>

  </section-def-macros>

  <section-rules>


<!--******** REGLES DE "DES" (article) ******************************************** -->

    <rule comment="REGLA: SENT DE LE (EO, ex. des rues -> stratoj, de la farine -> faruno)">
      <pattern>
        <pattern-item n="sent"/>
        <pattern-item n="de"/>
        <pattern-item n="le_det"/>
      </pattern>
      <action>
        <let><var n="nsent"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="Aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PREP DE LE (EO, ex. dans des rues -> en stratoj, à de la farine -> al faruno)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="de"/>
        <pattern-item n="le_det"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>

        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>        
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PREP DE UN_AUTRE (EO, ex. par d'autres -> per aliaj)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="de"/>
        <pattern-item n="un_autre_det"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <let><var n="ndet"/><clip pos="3" side="tl" part="lem"/></let>

        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <b pos="2"/>
          <chunk namefrom="ndet">
            <tags>
              <tag><lit-tag v="det"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



<!--******** REGLES DE SN ******************************************** -->

    <rule comment="REGLA: LE NUM (EO, ex. les quatre -> la kvar)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="num-vorto"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.pl.nom"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: LE UN de (EO, ex. l'un de -> unu el)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="un"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="unu"/>
              <lit-tag v="prn.tn.sg.nom"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: UN de (EO, ex. un de -> unu el)">
      <pattern>
        <pattern-item n="un"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prn" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="unu"/>
              <lit-tag v="prn.tn.sg.nom"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!-- KOMENCO DATOJ -->

<!--
    <rule comment="REGLA: LE NUM (EO, ex. le 1998 -> 1998)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.mf.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


    <rule comment="REGLA: NUM-NUM MOIS (2-3 juillet -> 2an-3an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NUM-NUM MOIS ANNÉE (2-3 juillet 1930 -> 2an-3an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NUM MOIS (2 juillet -> 2an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NUM MOIS ANNÉE (2 juillet 1930 -> 2an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_num"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: TAGO NUM MOIS (mardi 2 juillet -> mardon la 2an de julio)">
      <pattern>
        <pattern-item n="tago"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: TAGO NUM MOIS ANNÉE (mardi 2 juillet 1930 -> mardon 2an de julio 1930)">
      <pattern>
        <pattern-item n="tago"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: DET NUM MOIS (le 2 juillet -> la 2a de julio)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: DET NUM MOIS ANNÉE (le 2 juillet 1930 -> la 2a de julio 1930)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: DET NUM MOIS ADJ (le 2 juillet dernier -> la lasta 2a de julio)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: DET TAGO NUM MOIS (le mardi 2 juillet -> mardon la 2an de julio)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="tago"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: DET TAGO NUM MOIS ANNÉE (le mardi 2 juillet 1930 -> mardon 2an de julio 1930)">
      <pattern>
        <pattern-item n="le-erara"/>
        <pattern-item n="tago"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PREP DET NUM MOIS (depuis le 2 juillet -> de la 2a de julio)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="le-erara"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PREP DET NUM MOIS ANNÉE (depuis le 2 juillet 1930 -> de la 2a de julio 1930)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="le-erara"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: TAGO TAGOPARTO (mardi matin -> marde matene)">
      <pattern>
        <pattern-item n="tago"/>
        <pattern-item n="tagoparto"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: début/fin MOIS (fin juillet -> fine de julio)">
      <pattern>
        <pattern-item n="debut_fin"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
   <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="tl" part="lem"/><lit v="fajna"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="fino"/></let>
        </when>
   </choose>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: début/fin MOIS ANNÉE (fin juillet 1930 -> fine de julio 1930)">
      <pattern>
        <pattern-item n="debut_fin"/>
        <pattern-item n="monato"/>
        <pattern-item n="num-ciferoj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
   <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="tl" part="lem"/><lit v="fajna"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="fino"/></let>
        </when>
   </choose>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_num"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: le début/fin MOIS (la fin juillet -> fine de julio)">
      <pattern>
        <pattern-item n="le_det"/>
        <pattern-item n="debut_fin"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
   <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="2" side="tl" part="lem"/><lit v="fajna"/></equal>
          </test>
          <let><clip pos="2" side="tl" part="lem"/><lit v="fino"/></let>
        </when>
   </choose>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: À NUM HEURES (à 14 heures -> je la 14a)">
      <pattern>
        <pattern-item n="a-all"/>
        <pattern-item n="num"/>
        <pattern-item n="heure"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="je"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b/> <!-- à 20h: sen spaco en pos=2 -->
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: À NUM HEURES (à 14 heures -> je la 14a)">
      <pattern>
        <pattern-item n="sent_esp"/>
        <pattern-item n="a-all"/>
        <pattern-item n="num"/>
        <pattern-item n="heure"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="2"/></call-macro>
        <let><var n="nsent"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="je"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b/> <!-- à 20h: sen spaco en pos=2 -->
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERS NUM HEURES (vers 14 heures -> ĉirkaŭ la 14a)">
      <pattern>
        <pattern-item n="vers_pr"/>
        <pattern-item n="num"/>
        <pattern-item n="heure"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="la"/>
              <lit-tag v="det.def.sg.nom"/>
            </lu>
            <b/> <!-- à 20h: sen spaco en pos=2 -->
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!-- FINO DATOJ -->

    <!--********************************** IL Y A + TEMPS ********************************************* -->

    <rule comment="VERByavoir NUM NOMtemps (il y a trois semaines -> antaŭ tri semajnoj)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_num"/>
                      <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <var n="nombre"/>
                  <lit-tag v="nom"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERByavoir MESDE NUM NOMtemps (il y a moins de tres semaines -> antaŭ malpli ol tri semajnoj)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="plus_moins"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="6"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                    <lu>
                <clip pos="3" side="tl" part="whole"/>
                    </lu>
                <b pos="3"/>
                <lu>
                         <lit v="ol"/>
                   <lit-tag v="cnjcoo"/>
                </lu>
                <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_num"/>
                      <clip pos="5" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_nom"/>
                  <clip pos="6" side="tl" part="gen"/>
                  <var n="nombre"/>
                  <lit-tag v="nom"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERByavoir QNT NOMtemps (il y a quelques semaines -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="tot"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="2"/>
                    <lu>
                <clip pos="3" side="tl" part="lem"/>
                <clip pos="3" side="tl" part="a_det"/>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <var n="nombre"/>
                  <lit-tag v="nom"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="il VERByavoir un NOMtemps (il y a une semaines -> antaŭ unu semajno)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="un_det"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <lit v="unu"/>
              <lit-tag v="num.sg.nom"/>
            </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="il VERByavoir de les NOMtemps (il y a des semaines -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="de"/>
        <pattern-item n="les_det"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="5"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <lit v="kelka"/>
              <lit-tag v="det.qnt.pl.nom"/>
            </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- KOMENCO PROPRAJ NOMOJ -->

    <rule comment="REGLA: ANTROPÒNIM (Jean)">
      <pattern>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant1" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM ANTROPÒNIM (Pierre Dupont)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="antunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM ANTROPÒNIM (Pierre Dupont)">
      <pattern>
        <pattern-item n="antunk"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM de NP (Pierre de Bretagne, Alexander von Humboldt)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="de_von"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: Saint-NP (Saint-Pierre)">
      <pattern>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="loc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NP-Saint-NP (Lay-Saint-Pierre)">
      <pattern>
        <pattern-item n="npunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="loc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="sl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: Saint-NP-any-NP (Saint-Etienne-les-Remiremont)">
      <pattern>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="any"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="loc333" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="sl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="sl" part="lem"/>
              <clip pos="6" side="tl" part="tags"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="7" side="sl" part="lem"/>
              <clip pos="7" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: À Saint-NP (à Saint-Pierre -> en Saint-Pierre)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="en" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: À NP-Saint-NP (à Lay-Saint-Pierre -> en)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="npunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="en" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="sl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="sl" part="lem"/>
              <clip pos="6" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: À Saint-NP-any-NP (à Saint-Etienne-les-Remiremont -> en)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="any"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="en" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="sl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="sl" part="lem"/>
              <clip pos="6" side="tl" part="tags"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="7" side="sl" part="lem"/>
              <clip pos="7" side="tl" part="tags"/>
            </lu>
            <b pos="7"/>
            <lu>
              <clip pos="8" side="sl" part="lem"/>
              <clip pos="8" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM-ANTROPÒNIM (Jean-Michel)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="guio"/>
        <pattern-item n="antunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM-ANTROPÒNIM (Jean-Michel)">
      <pattern>
        <pattern-item n="antunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: Marie-ANTROPÒNIM (Marie-Jeanne)">
      <pattern>
        <pattern-item n="Marie"/>
        <pattern-item n="guio"/>
        <pattern-item n="antunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.f.sg.nom"/></tag>
            </tags>
            <lu>
              <lit v="Marie"/>
              <lit-tag v="np.ant.f.sg.4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM-Marie (Jeanne-Marie)">
      <pattern>
        <pattern-item n="antunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="Marie"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.f.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="Marie"/>
              <lit-tag v="np.ant.f.sg.4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: Marie ANTROPÒNIM (Marie Jeanne)">
      <pattern>
        <pattern-item n="Marie"/>
        <pattern-item n="antunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.f.sg.nom"/></tag>
            </tags>
            <lu>
              <lit v="Marie"/>
              <lit-tag v="np.ant.f.sg.4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LOKNOMO (identigo de loknomo por t2x)">
      <pattern>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="loc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="m"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ART PROPRA_NOMO (les Pyrénées - Pireneoj; forigo de la artikolo)">
      <pattern>
        <pattern-item n="def"/>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="2" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="loc" case="caseFirstWord">  <!-- ne ĉiam loknomo, sed ne gravas -->
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: ART AKRONIMO (le TGV - TGV; forigo de la artikolo - se plu estas akronimo en la cellingo)">
      <pattern>
        <pattern-item n="def"/>
        <pattern-item n="acr"/>
      </pattern>
      <action>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="2" side="tl" part="nbr"/>
        </let>
   <choose>
     <when>
      <test>
        <equal><clip pos="2" side="tl" part="a_np_acr"/><lit-tag v="acr"/></equal>
      </test>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </when>
     <otherwise>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
   </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



<!-- FINO PROPRAJ NOMOJ -->


    <rule comment="REGLA: NOM (per a col·locar la cua en les multiparaules amb g (EO)">
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOMda DE (millon de -> miliono da)">
      <pattern>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="da">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NUM NOMda DE (15 millons de -> 15 milionoj da)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="da">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: À NUM NOMda DE (à 15 quilòmetres de -> je 15 kilometroj de)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="num"/>
        <pattern-item n="nom_dist"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="je">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="je"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: À LOKNOMO (a Barcelona - en Barcelono; ŝanĝo de prepozicio)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="2" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="en" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="m"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: À DET LOKNOMO (als Pirineus - en Pireneoj; es canvia la preposició i s'elimina l'article)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="def"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="3" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="en" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DE LOKNOMO À LOKNOMO (de Madrid à Barcelone - de Madrid al Barcelono; evito de funkciigo de la regulo À LOKNOMO)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="loc"/>
        <pattern-item n="a_pr"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="de" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="al">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="al"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DE LOKNOMO À DET LOKNOMO (de Paris au Sénegal - de Parizo al Senegalo; evito de funkciigo de la regulo À LOKNOMO)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="loc"/>
        <pattern-item n="a_pr"/>
        <pattern-item n="def"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="3" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="de" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="al">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="al"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="4"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><clip pos="5" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DE DET LOKNOMO À DET LOKNOMO (du Maroc au Sénegal - de Maroko al Senegalo; evito de funkciigo de la regulo À LOKNOMO)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="def"/>
        <pattern-item n="loc"/>
        <pattern-item n="a_pr"/>
        <pattern-item n="def"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="3" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="de" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="al">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="al"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="5"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="6" side="sl" part="gen"/></tag>
              <tag><clip pos="6" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: TOUT LE LOKNOMO (toute l'Europe -> la tuta Eŭropo)">
      <pattern>
        <pattern-item n="tout_predet"/>
        <pattern-item n="le_det"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <lit v="la tuta"/>
              <lit-tag v="det"/>
              <lit-tag v="ind"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos ="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DEM NOM-CI  (cette fois-ci -> tiu ĉi fojo)">
      <pattern>
        <pattern-item n="dem"/>
        <pattern-item n="nom"/>
        <pattern-item n="guio"/>
        <pattern-item n="ci"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <lit v="tiu ĉi"/>
              <lit-tag v="prn"/>
              <lit-tag v="tn"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos ="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DEM NOM-LÀ  (cette fois-là -> tiu fojo)">
      <pattern>
        <pattern-item n="dem"/>
        <pattern-item n="nom"/>
        <pattern-item n="guio"/>
        <pattern-item n="la_adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <lit v="tiu"/>
              <lit-tag v="prn"/>
              <lit-tag v="tn"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos ="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DE NOM EN NOM (de place en place - de loko al loko; en -> al)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="loc"/>
        <pattern-item n="en_pr"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="de" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="al">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="al"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="loc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LE NOM més ADJ (EO, més -> plej ex: la casa més gran -> la plej granda domo)">
      <pattern>
        <pattern-item n="le_det"/>
        <pattern-item n="nom"/>
        <pattern-item n="plus_moins_strict"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
<!--
        <call-macro n="genro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="genro_tl">
          <with-param pos="2"/>
        </call-macro>
-->

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="3" side="sl" part="lem"/>
        <lit v="plus"/>
        </equal>
      </test>
        <let>
          <clip pos="3" side="tl" part="lem"/>
          <lit v="plej"/>
        </let>
     </when>
     <otherwise>
        <let>
          <clip pos="3" side="tl" part="lem"/>
          <lit v="malplej"/>
        </let>
     </otherwise>
   </choose>

        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/> <!-- canvi a plej/malplej-->
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>

          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: LE més ( le plus -> la plej )">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="plus_moins_strict"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pli_plej1a">
          <with-param pos="2"/>
        </call-macro>
        <let><var n="ndet"/><clip pos="1" side="sl" part="lem"/></let>

        <out>
          <chunk namefrom="ndet" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="det"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/> <!-- canvi a plej/malplej-->
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!--
    <rule comment="REGLA: LE més ADJ (EO, més -> plej ex: la més gran -> la plej granda)">
      <pattern>
        <pattern-item n="le_det"/>
        <pattern-item n="plus_moins_strict"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <call-macro n="pli_plej1a">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/> 
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->

    <rule comment="REGLA: LE MEILLEUR ('le meilleur - la plej granda/plej bona')">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="meilleur"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2a">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
            <out>
              <chunk name="det_adj" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><var n="genere"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LE ADJ MEILLEUR ('le deuxième meilleur - la dua plej granda/plej bona')">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="adj"/>
        <pattern-item n="meilleur"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2a">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
            <out>
              <chunk name="det_adj" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><var n="genere"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LE MEILLEUR DE ('el mayor/menor de - la plej granda/plej malgranda el') (EOes)">
      <pattern>
        <pattern-item n="le_det"/>
        <pattern-item n="meilleur"/>
        <pattern-item n="de"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2a">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="genro_tl">
          <with-param pos="2"/>
        </call-macro>
            <out>
              <chunk name="det_adj" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><var n="genere"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="el">
                <tags>
                  <tag><lit-tag v="pr"/></tag>
                </tags>
                <lu>
                  <lit v="el"/>
                  <lit-tag v="pr"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LE POS (EO, ex. les miens -> la miaj)">
      <pattern>
        <pattern-item n="le_det"/>
        <pattern-item n="pos"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_pos"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM (EO, ex. trois livres -> tri libroj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

   <!-- estas nemalmultaj da strangetaj kazoj, en kiuj sinsekvas io analizita kiel numero kaj io analizita kiel nomo, sed ne interakordantaj -->
   <choose>
     <when>
      <test>
       <equal>
        <clip pos="2" side="sl" part="nbr"/>
        <lit v="sg"/>
        </equal>
      </test>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </when>

     <otherwise>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
   </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADJ NOM (EO, ex. tres grands llibres -> tri grandaj libroj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADJ NOM ADJ (EO, ex. trois grands courrants politiques -> tri grandaj politikaj kurentoj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADJ ADJ NOM (EO, ex. tres derniers grands écrivans -> tri lastaj grandaj verkistoj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADV ADJ NOM (EO, ex. trois très grands livres -> tri tre grandaj libroj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADV ADJ NOM ADJ (EO, ex. trois très grands livres éducatifs -> tri tre grandaj edukaj libroj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="4"/>
          <with-param pos="5"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="4"/>
          <with-param pos="5"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM ADJ (EO, ex. tres cases blanques, tres llibres interessants, dos cotxes verds -> tri blankaj domoj, tri interesaj libroj, du verdaj aŭtoj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM ADJ ADJ (EO, ex. trois maisons blanches andalouses -> tri andaluzaj blankaj domoj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM ADV ADJ (EO, ex. dues cases tan grans -> du domoj tiel grandaj - mantenim l'ordre perquè en comparacions hi ha a vegades problemes: una altra deu vegades més pesada -> #alia dek pli peza fojoj)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM ADJ conj ADJ (EO, coordinació d'adjectius)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

            <out>
              <chunk name="num_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genere"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_num"/>
                      <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="4"/>
                    </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="tags"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genere2"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: QNT DET NOM (EO, tots els nois -> ĉiuj knaboj; la majoria dels nois -> la plimulto da knaboj)">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="le"/>
        </equal>
      </test>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ NOM (EO) grans persones -> grandaj homoj">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ-ADJ (EO) franco-américain -> franc-amerika">
      <pattern>
        <pattern-item n="adjADJ"/>
        <pattern-item n="guio"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

   <choose>
     <when>
      <test>
        <and>
          <equal><b pos="1"/><lit v=""/></equal>
          <equal><b pos="2"/><lit v=""/></equal>
        </and>
      </test>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </when>
     <otherwise>
       <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="nom"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="unknown">
            <tags>
              <tag><lit-tag v="unknown"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adj">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="nom"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
       </out>
     </otherwise>
   </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ-NOM (EO) demi-journée -> duon-labortago">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="nom"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ-unk (EO) Haut-Rhinx -> Haut-Rhinx (ni taksas la aferon loknomo)">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <out>
          <chunk name="loc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <var n="nombre"/>
              <lit-tag v="nom"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
<!--
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
-->
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV ADJ NOM (EO) molt grans persones -> tre grandaj homoj">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV ADJ NOM ADJ (EO) molt diferents tendències socialistes -> tre malsamaj socialismaj tendencoj">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombro3">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ ADJ NOM (EO) primer gran concert -> unua granda concerto ">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ ADJ NOM ADJ (EO) primer gran concert públic -> unua granda publika concerto">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombro4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ conj ADJ NOM (EO) primer i últim concert -> unua kaj lasta koncerto">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombro3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ conj ADJ NOM ADJ (EO) primer i últim concert públic -> unua kaj lasta publika koncerto">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombro4">
          <with-param pos="4"/>
          <with-param pos="5"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="4"/>
          <with-param pos="5"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    <rule comment="REGLA: QNT DET NOM ADJ (EO, ex. tots els cotxes blancs -> ĉiuj blankaj auxtoj)">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="le"/>
        </equal>
      </test>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise> 
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="det_nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->

    <rule comment="REGLA: NOM-NOM ADJ (EO, ciutat-jardí moderna -> moderna urbo-ĝardeno, per evitar *urbo-moderna ĝardeno)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="guio"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ-ADJ (EO, classe mitjana-alta -> meza-alta klaso, per evitar *meza klaso-alta)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ-NP (château Saint-Ange, rue Saint-Jean -> kastelo Sankta-Anĝelo, strato Saint-Jean, por eviti *la Sankta kastelo-Anĝelo)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj1" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ-NOM (organisations anti-communistes -> organisations anti-komunistoj (error del tagger)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="nom_nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj1" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
<!--
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
-->
              <lit-tag v="adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ-UNK (EO, château Saint-Ange, rue Saint-Jean -> kastelo Sankta-Anĝelo, strato Saint-Jean, por eviti *la Sankta kastelo-Anĝelo)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ ADJ-ADJ (EO, classe social mitjana-alta -> meza-alta socia klaso, per evitar *meza socia klaso-alta)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ-ADJ-ADJ (EO, diccionari català-valencià-balear -> kataluna-valencia-baleara vortaro, per evitar *kataluna-valencia vortaro-baleara)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ-UNK (EO, classe mitjana-alta -> meza-alta klaso, per evitar *meza klaso-alta)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ ADJ-UNK (EO, classe social mitjana-alta -> meza-alta socia klaso, per evitar *meza socia klaso-alta)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ-ADJ-UNK (EO, diccionari català-valencià-balear -> kataluna-valencia-baleara vortaro, per evitar *kataluna-valencia vortaro-baleara)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ (EO, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: POS NOM LE PLUS ADJ (son oeuvre la plus célèbre -> lia plej fama verko)">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="nom"/>
        <pattern-item n="le_det"/>
        <pattern-item n="plus_moins_strict"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="pli_plej1a">
          <with-param pos="4"/>
        </call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LE PLUS ADJ POSSIBLE (le plus puissant possible -> kiel eble plej potenca)">
      <pattern>
        <pattern-item n="le_det"/>
        <pattern-item n="plus_moins_strict"/>
        <pattern-item n="adj"/>
        <pattern-item n="possible"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="pli_plej1a">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="kiel"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <lit v="eble"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    <rule comment="REGLA: DET PLUS (korekto de tagger: le plus -> la plej )">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="plus_n"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="plej"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


<!--
    <rule comment="REGLA: DET PLUS ADJ (korekto de tagger: le plus grand -> la plej granda)">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="plus_n"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="plej"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET PLUS ADJ coord ADJ (korekto de tagger: le plus grand et important -> la plej granda kaj grava)">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="plus_n"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="plej"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


    <rule comment="REGLA: DET ADJ PLUS (korekto de tagger: le deuxième plus -> la dua plej)">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="adj"/>
        <pattern-item n="plus_n"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="plej"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    <rule comment="REGLA: DET ADJ PLUS ADJ (korekto de tagger: le deuxième plus grand -> la dua plej granda)">
      <pattern>
        <pattern-item n="det_defpos"/>
        <pattern-item n="adj"/>
        <pattern-item n="plus_n"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="plej"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


    <rule comment="REGLA: NOM ADJ ADJ (EO, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ PLUS ADJ (korekto de tagger: deuxième plus grand -> dua plej granda)">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="plus_n"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="genro_tl">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="plej"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ NOM ADJ (EO, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_antaux_adj">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ conj ADJ (EO, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ ADJ ADJ (EO, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ, ADJ I ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="genro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ, ADJ, ADJ I ADJ (soldats soviétiques, américains, britanniques et français -> sovetiaj, usonaj, britaj kaj francaj soldatoj)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro5">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="6"/>
          <with-param pos="8"/>
        </call-macro>
        <call-macro n="genro5">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="6"/>
          <with-param pos="8"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="7" side="tl" part="lem"/>
              <clip pos="7" side="tl" part="tags"/>
            </lu>
            <b/>
            <lu>
              <clip pos="8" side="tl" part="lemh"/>
              <clip pos="8" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="8" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADV ADJ (EO, noia molt maca; noia increïblement maca -> tre bela knabino; nekredeble bela knabino - mantenim l'ordre perquè en comparacions hi ha a vegades problemes: una estrella deu vegades més pesada -> #stelo dek pli peza fojoj)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADV ADJ conj ADJ (EO, noia molt maca i simpàtica ; noia increïblement maca i simpàtica -> tre bela kaj simpatia knabino; nekredeble bela kaj simpatia knabino)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genere"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genere2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda) (EO)">
      <pattern>
        <pattern-item n="adj"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="temps"/>
              <lit-tag v="pp"/>
            </equal>
          </test>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: ADV ADJECTIU ('molt/poc/gens/bastant/força/increïblement gran - ') (EO)">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adv_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="tags"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ coord ADJ ">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

      <choose>
        <when> <!-- ADJ1 kaj ADJ interakordas -->
          <test>
            <and>
              <or>
                  <equal><clip pos="1" side="tl" part="gen"/><clip pos="3" side="tl" part="gen"/></equal>
                  <equal><clip pos="1" side="tl" part="gen"/><lit-tag v="mf"/></equal>
                  <equal><clip pos="3" side="tl" part="gen"/><lit-tag v="mf"/></equal>
              </or>
              <or>
                  <equal><clip pos="1" side="tl" part="nbr"/><clip pos="3" side="tl" part="nbr"/></equal>
                  <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="sp"/></equal>
                  <equal><clip pos="3" side="tl" part="nbr"/><lit-tag v="sp"/></equal>
              </or>
            </and>
          </test>
          <call-macro n="nombro2">
            <with-param pos="1"/>
            <with-param pos="3"/>
          </call-macro>
          <call-macro n="genro2">
            <with-param pos="1"/>
            <with-param pos="3"/>
          </call-macro>
          <call-macro n="genro_tl2">
            <with-param pos="1"/>
          </call-macro>
          <out>
            <chunk name="adj" case="caseFirstWord">
              <tags>
                <tag><lit-tag v="SA"/></tag>
                <tag><var n="genere"/></tag>
                <tag><var n="nombre"/></tag>
                <tag><var n="case"/></tag>
                <tag><var n="changecase"/></tag>
                </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_adj"/>
                <lit-tag v="3"/>
                <lit-tag v="4"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="tags"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_adj"/>
                <lit-tag v="3"/>
                <lit-tag v="4"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
          </out>
        </when>
        <otherwise> <!-- ADJ1 kaj ADJ ne interakordas -->
          <let><var n="ncnj"/><clip pos="2" side="tl" part="lem"/></let>
          <out>
            <chunk name="adj" case="caseFirstWord">
              <tags>
                <tag><lit-tag v="SA"/></tag>
                <tag><clip pos="1" side="sl" part="gen"/></tag>
                <tag><clip pos="1" side="sl" part="nbr"/></tag>
                <tag><var n="case"/></tag>
                <tag><var n="changecase"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_adj"/>
                <lit-tag v="3"/>
                <lit-tag v="4"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </chunk>
            <b pos="1"/>
            <chunk namefrom="ncnj">
              <tags>
                <tag><clip pos="2" side="tl" part="tags"/></tag>
              </tags>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="tags"/>
              </lu>
            </chunk>
            <b pos="2"/>
            <chunk name="adj">
              <tags>
                <tag><lit-tag v="SA"/></tag>
                <tag><clip pos="1" side="sl" part="gen"/></tag>
                <tag><clip pos="1" side="sl" part="nbr"/></tag>
                <tag><var n="case"/></tag>
                <tag><var n="changecase"/></tag>
              </tags>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_adj"/>
                <lit-tag v="3"/>
                <lit-tag v="4"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
          </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: PLUS ADJECTIU QUE ('més/menys gran que - ') (EO)">
      <pattern>
        <pattern-item n="plus_moins"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcomp"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="1"/>
        </call-macro>

            <out>
              <chunk name="adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                         <lit v="ol"/>
                   <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PLUS ADV QUE ('més/menys gran que - ') (EO)">
      <pattern>
        <pattern-item n="plus_moins"/>
        <pattern-item n="adv"/>
        <pattern-item n="cnjcomp"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="1"/>
        </call-macro>

            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adv"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                         <lit v="ol"/>
                   <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PLUS QUE ('més/menys que - ') (EO)">
      <pattern>
        <pattern-item n="plus_moins"/>
        <pattern-item n="cnjcomp"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="1"/>
        </call-macro>

            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="1"/>
                <lu>
                         <lit v="ol"/>
                   <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PAS PLUS QUE ('més/menys que - ') (EO)">
      <pattern>
        <pattern-item n="pas"/>
        <pattern-item n="plus_moins"/>
        <pattern-item n="cnjcomp"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="2"/>
        </call-macro>

            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                         <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                         <lit v="ol"/>
                   <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PLUS DE NOM QUE ('plus/moins de liberté que - pli/malpli da libereco ol')">
      <pattern>
        <pattern-item n="plus_moins"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="1"/>
        </call-macro>

            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="3" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="tags"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="da"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <lit-tag v="3"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: SI ADJECTIU QUE (si grand que -> tiel granda ke) (EO)">
<!--
laŭ la tekstaraj provoj, indas "ke" kaj ne "kiel"
-->
      <pattern>
        <pattern-item n="si_cmp"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcomp"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="tags"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
                <b pos="2"/>
                 <chunk name="cnjsub">
                            <tags>
                              <tag><lit-tag v="cnjsub"/></tag>
                            </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: MEILLEUR QUE ('mayor/menor que - pli granda/pli malgranda ol') (EOes)">
      <pattern>
        <pattern-item n="meilleur"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adj" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><clip pos="1" side="sl" part="gen"/></tag>
                   <tag><clip pos="1" side="sl" part="nbr"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: MIEUX QUE ('mayor/menor que - pli granda/pli malgranda ol') (EOes)">
      <pattern>
        <pattern-item n="mieux"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: MEILLEUR NOM QUE ('mayor/menor libertad que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
        <pattern-item n="meilleur"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="genro_tl">
          <with-param pos="2"/>
        </call-macro>
            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><var n="genere"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: MEILLEUR NOM ADJ QUE ('mayor/menor libertad individual que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
        <pattern-item n="meilleur"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="genro3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_genro">
        </call-macro>
        <call-macro n="genro_tl2">
          <with-param pos="2"/>
        </call-macro>
            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><var n="genere"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DETERMINANT (perquè no doni error si va davant de desconegudes i no es pot assignar nombre) (EO)">
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>                
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
            <equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal>
            </test>
            <let><var n="ndet"/><lit v="num"/></let>
          </when>
          <otherwise>
            <let><var n="ndet"/><clip pos="1" side="sl" part="lem"/></let>
          </otherwise>
        </choose>

        <out>
          <chunk namefrom="ndet" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="det"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- ****** REGLES DE SV *********************************************** -->


    <!-- specialaj reguloj por SVser -->

    <rule comment="VERBhaver PPêtre (tu avais été -> vi estis -- simpligo de pasinto, pro natureco)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="etre_paraitre_pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>
                <test>
                  <equal><clip pos="1" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="1" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="NE VERBhaver PAS PPêtre (tu n'avais pas été -> vi ne estis -- simpligo de pasinto, pro natureco)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="etre_paraitre_pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>
                <test>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="2" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <out>
          <chunk name="ne">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="ÊTRE LUI (c'est lui -> estas li)">
      <pattern>
        <pattern-item n="c_etre"/>
        <pattern-item n="lui"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prpers">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="subj"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="ÊTRE LUI INF (c'est lui dire -> estas diri al li - por eviti mislanĉojn de la antaŭa regulo)">
      <pattern>
        <pattern-item n="c_etre"/>
        <pattern-item n="lui"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>

        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="prpers">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="dat"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="CE NE ÊTRE PAS LUI (ce n'est pas lui -> ne estas li)">
      <pattern>
        <pattern-item n="ce-erara"/>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="lui"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="prpers">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="subj"/></tag>
              <tag><clip pos="5" side="tl" part="pers"/></tag>
              <tag><clip pos="5" side="tl" part="gen"/></tag>
              <tag><clip pos="5" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="5" side="tl" part="pers"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="CE NE ÊTRE PAS LUI INF (ce n'est pas lui -> ne estas diri al li - por eviti mislanĉojn de la antaŭa regulo)">
      <pattern>
        <pattern-item n="ce-erara"/>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="lui"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
        </out>

        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="6"/>
        </call-macro>
        <out>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="6" side="tl" part="a_verb"/></tag>
              <tag><clip pos="6" side="tl" part="temps"/></tag>
              <tag><clip pos="6" side="tl" part="pers"/></tag>
              <tag><clip pos="6" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <clip pos="6" side="tl" part="sep"/>
              <clip pos="6" side="tl" part="temps"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="prpers">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="dat"/></tag>
              <tag><clip pos="5" side="tl" part="pers"/></tag>
              <tag><clip pos="5" side="tl" part="gen"/></tag>
              <tag><clip pos="5" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="5" side="tl" part="pers"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="L'ÊTRE (tu l'es -> vi estas tia)">
      <pattern>
        <pattern-item n="le_prn"/>
        <pattern-item n="etre_paraitre"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adj">
            <tags>
              <tag><lit-tag v="SA.mf.sp.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tia"/>
              <lit-tag v="adj.3.nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="NE L'ÊTRE PAS (tu ne l'es pas -> vi ne estas tia)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="le_prn"/>
        <pattern-item n="etre_paraitre"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="ne">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adj">
            <tags>
              <tag><lit-tag v="SA.mf.sp.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tia"/>
              <lit-tag v="adj.3.nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="L'VERBhaver PPêtre (tu l'a été -> vi estis tia)">
      <pattern>
        <pattern-item n="le_prn"/>
        <pattern-item n="haver"/>
        <pattern-item n="etre_paraitre_pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>
                <test>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="2" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adj">
            <tags>
              <tag><lit-tag v="SA.mf.sp.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tia"/>
              <lit-tag v="adj.3.nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="NE L'VERBhaver PAS PPêtre (tu ne l'a pas été -> vi ne estis tia)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="le_prn"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="etre_paraitre_pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>
                <test>
                  <equal><clip pos="3" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="3" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <out>
          <chunk name="ne">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adj">
            <tags>
              <tag><lit-tag v="SA.mf.sp.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tia"/>
              <lit-tag v="adj.3.nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="NE L'VERBhaver PAS ADV PPêtre (tu ne l'a pas beaucoup été -> vi ne multe estis tia)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="le_prn"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="etre_paraitre_pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>
                <test>
                  <equal><clip pos="3" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="3" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <out>
          <chunk name="ne">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="5" side="tl" part="lem"/>
                <clip pos="5" side="tl" part="a_adv"/>
              </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="6" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <clip pos="6" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="adj">
            <tags>
              <tag><lit-tag v="SA.mf.sp.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tia"/>
              <lit-tag v="adj.3.nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <!-- fino specialaj reguloj por SVser -->

    <!-- reguloj por adverbigo de adjektivoj -->

    <rule comment="VERB ADJ QUE ( el ADJ passa a ADV: considère important que -> konsideras grave ke )">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="cnjsub">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                    <lit v="ke"/>
              <lit-tag v="cnjsub"/>
               </lu>
            </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="VERB ADV ADJ QUE ( el ADJ passa a ADV: considère très important que -> konsideras molt grave ke )">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="preadv"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="cnjsub">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                    <lit v="ke"/>
              <lit-tag v="cnjsub"/>
               </lu>
            </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver PP ADJ QUE ( el ADJ passa a ADV: a considéré important que -> konsideris grave ke )">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="2"/>
          <chunk name="adv">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="cnjsub">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                    <lit v="ke"/>
              <lit-tag v="cnjsub"/>
               </lu>
            </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver PP ADV ADJ QUE ( el ADJ passa a ADV: a considéré très important que -> konsideris tre grave ke )">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="preadv"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="2"/>
          <chunk name="adv">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="cnjsub">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                    <lit v="ke"/>
              <lit-tag v="cnjsub"/>
               </lu>
            </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBvenirde + INF (je viens de faire -> mi ĵus faris)">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>

            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
              <when> <!-- korekto: je viens de faire -> mi ĵus faras -> mi ĵus faris -->
                <test>
                    <equal>
                      <clip pos="1" side="tl" part="temps"/>
                      <lit-tag v="pres"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>
        </choose>
                <out>
                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBvenirde + PRON + INF (je viens de le faire -> mi ĵus faris lin)">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="de"/>
        <pattern-item n="pro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="3"/>
        </call-macro>

        <choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
            </out>
              </when>

            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
              <when> <!-- korekto: je viens de faire -> mi ĵus faras -> mi ĵus faris -->
                <test>
                    <equal>
                      <clip pos="1" side="tl" part="temps"/>
                      <lit-tag v="pres"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>
        </choose>
                <out>
                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                <b pos="2"/>
                </out>
        </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBcontinueràde + INF (je continue à faire -> mi daŭre faras)">
      <pattern>
        <pattern-item n="verb_adv"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_verb_adv">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <var n="lema"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>

            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <var n="lema"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBcontinueràde + PRON + INF (je continue à le faire -> mi daŭre faras lin)">
      <pattern>
        <pattern-item n="verb_adv"/>
        <pattern-item n="de_a"/>
        <pattern-item n="pro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="m_verb_adv">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <var n="lema"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
            </out>
              </when>

            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <var n="lema"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                </out>
          </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PARLER + ADJ (el ADJ passa a ADV: parler breton -> paroli bretone)">
      <pattern>
        <pattern-item n="parler"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
           </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PARLER + ADV + ADJ (el ADJ passa a ADV: parler bien breton -> paroli bone bretone)">
      <pattern>
        <pattern-item n="parler"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verbcj_adj_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        <b pos="1"/>
        <chunk name="adv">
          <tags>
            <tag><lit-tag v="adv"/></tag>
          </tags>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adv"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <lit-tag v="adv"/>
          </lu>
        </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB + ADJ + INF (el ADJ passa a ADV: sempre és interessant llegir -> ĉiam estas interese legi EO)">
      <pattern>
        <pattern-item n="verbcj2"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
                </chunk>

                <b pos="2"/>

            <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
            </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
            </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="VERB + ADV + ADJ + INF (el ADJ passa a ADV: és sempre interessant llegir -> estas ĉiam interese legi EO)">
      <pattern>
        <pattern-item n="verbcj2"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>


                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
                            <lu>
                              <clip pos="2" side="tl" part="lem"/>
                              <clip pos="2" side="tl" part="a_adv"/>
                            </lu>
                            <b pos="2"/>
                        <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
                </chunk>

                <b pos="3"/>

            <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
            </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
            </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="C'ÊTRE + ADJ + DE + INF (el ADJ passa a ADV: c'est intéressant de lire -> estas interese legi)">
      <pattern>
        <pattern-item n="c_etre"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
                <tags>
                <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                <clip pos="2" side="tl" part="lem"/>
                <lit-tag v="adv"/>
                </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="C'ÊTRE + ADV + ADJ + DE + INF (el ADJ passa a ADV: c'est très intéressant de lire -> estas tre interese legi)">
      <pattern>
        <pattern-item n="c_etre"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        <b pos="1"/>
        <chunk name="adv">
          <tags>
            <tag><lit-tag v="adv"/></tag>
          </tags>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adv"/>
           </lu>
           <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <lit-tag v="adv"/>
          </lu>
        </chunk>
        <b pos="3"/>
        <chunk name="inf">
          <tags>
            <tag><lit-tag v="SV"/></tag>
            <tag><clip pos="5" side="tl" part="a_verb"/></tag>
            <tag><clip pos="5" side="tl" part="temps"/></tag>
            <tag><var n="tipus_verb"/></tag>
          </tags>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_verb"/>
            <clip pos="5" side="tl" part="sep"/>
            <clip pos="5" side="tl" part="temps"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
         </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL + ÊTRE + ADJ + DE + INF (el ADJ passa a ADV: il est intéressant de lire -> estas interese legi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="etre_paraitre"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adv">
                <tags>
                <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="adv"/>
                </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="5" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL + ÊTRE + ADV + ADJ + DE + INF (el ADJ passa a ADV: il est très intéressant de lire -> estas tre interese legi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="etre_paraitre"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        <b pos="2"/>
        <chunk name="adv">
          <tags>
            <tag><lit-tag v="adv"/></tag>
          </tags>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adv"/>
           </lu>
           <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <lit-tag v="adv"/>
          </lu>
        </chunk>
        <b pos="4"/>
        <chunk name="inf">
          <tags>
            <tag><lit-tag v="SV"/></tag>
            <tag><clip pos="6" side="tl" part="a_verb"/></tag>
            <tag><clip pos="6" side="tl" part="temps"/></tag>
            <tag><var n="tipus_verb"/></tag>
          </tags>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_verb"/>
            <clip pos="6" side="tl" part="sep"/>
            <clip pos="6" side="tl" part="temps"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
         </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL + VERBhaver PPêtre + ADJ + DE + INF (il a été intéressant de lire -> estis interese legi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="etre_paraitre_pp"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <choose>
              <when>
                <test>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="2" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="adv">
                <tags>
                <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                <clip pos="4" side="tl" part="lem"/>
                <lit-tag v="adv"/>
                </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="6" side="tl" part="a_verb"/></tag>
              <tag><clip pos="6" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <clip pos="6" side="tl" part="sep"/>
              <clip pos="6" side="tl" part="temps"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL + VERBhaver PPêtre + ADV + ADJ + DE + INF (il a été très intéressant de lire -> estis tre interese legi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="etre_paraitre_pp"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="7"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <choose>
              <when>
                <test>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let><clip pos="2" side="tl" part="temps"/><lit-tag v="past"/></let>
              </when>
        </choose>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        <b pos="3"/>
        <chunk name="adv">
          <tags>
            <tag><lit-tag v="adv"/></tag>
          </tags>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adv"/>
           </lu>
           <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="lem"/>
            <lit-tag v="adv"/>
          </lu>
        </chunk>
        <b pos="5"/>
        <chunk name="inf">
          <tags>
            <tag><lit-tag v="SV"/></tag>
            <tag><clip pos="7" side="tl" part="a_verb"/></tag>
            <tag><clip pos="7" side="tl" part="temps"/></tag>
            <tag><var n="tipus_verb"/></tag>
          </tags>
          <lu>
            <clip pos="7" side="tl" part="lemh"/>
            <clip pos="7" side="tl" part="a_verb"/>
            <clip pos="7" side="tl" part="sep"/>
            <clip pos="7" side="tl" part="temps"/>
            <clip pos="7" side="tl" part="lemq"/>
          </lu>
         </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL + NE + ÊTRE + PAS + ADJ + DE + INF (il n'est pas intéressant de lire -> ne estas interese legi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="etre_paraitre"/>
        <pattern-item n="pas"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="7"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <out>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="5"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="7" side="tl" part="a_verb"/></tag>
              <tag><clip pos="7" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_verb"/>
              <clip pos="7" side="tl" part="sep"/>
              <clip pos="7" side="tl" part="temps"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL + NE + ÊTRE + PAS + ADV + ADJ + DE + INF (il n'est pas très intéressant de lire -> ne estas tre interese legi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="etre_paraitre"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="8"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
              <tags>
                <tag><lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
              </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        <b pos="3"/>
      </out>
      <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
      <out>
        <chunk name="adv">
          <tags>
            <tag><lit-tag v="adv"/></tag>
          </tags>
          <lu>
            <clip pos="5" side="tl" part="lem"/>
            <clip pos="5" side="tl" part="a_adv"/>
           </lu>
           <b pos="5"/>
          <lu>
            <clip pos="6" side="tl" part="lem"/>
            <lit-tag v="adv"/>
          </lu>
        </chunk>
        <b pos="6"/>
        <chunk name="inf">
          <tags>
            <tag><lit-tag v="SV"/></tag>
            <tag><clip pos="8" side="tl" part="a_verb"/></tag>
            <tag><clip pos="8" side="tl" part="temps"/></tag>
            <tag><var n="tipus_verb"/></tag>
          </tags>
          <lu>
            <clip pos="8" side="tl" part="lemh"/>
            <clip pos="8" side="tl" part="a_verb"/>
            <clip pos="8" side="tl" part="sep"/>
            <clip pos="8" side="tl" part="temps"/>
            <clip pos="8" side="tl" part="lemq"/>
          </lu>
         </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="7"/><with-param pos="8"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <!-- fino de reguloj por adverbigo de adjektivoj -->


    <rule comment="VERB conjugat ( chante - kantas ) (EO)">
      <pattern>
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB conjugat ! ( chante ! - kantu! ) (EO)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="excl"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>
                <test>
                    <equal><clip pos="1" side="tl" part="temps"/><lit-tag v="pres"/></equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/><lit-tag v="imp"/></let>
              </when>
        </choose>
        <let><var n="nsent"/><clip pos="2" side="tl" part="lem"/></let>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
               <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB conjugat + INF (voulait chanter -> volis kanti)">
      <pattern>
        <pattern-item n="verbcj2"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="1"/>
        </call-macro>

   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="faire"/>
            </equal>
          </test>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </when>
        <otherwise>
        <call-macro n="set_sxati">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </otherwise>
   </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB + INFhaver + PP (semble avoir chanté -> ŝajnas esti kantinta)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRON + VERB conjugat + INF (le voulait chanter -> volis kanti ĝin)">
      <pattern>
        <pattern-item n="pro-noref"/>
        <pattern-item n="verbcj2"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="sl" part="lem"/>
              <lit v="faire"/>
            </equal>
          </test>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        </when>
        <otherwise>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        </otherwise>
   </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB conjugat + DE + INF (décida de chanter -> decidis kanti)">
      <pattern>
        <pattern-item n="verbcjinf"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB + DE + INFhaver + PP (se satisfait d'avoir chanté -> kontentas esti kantinta)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="de_a"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB + DE + PRON + INF (décida de le chanter -> decidis kanti ĝin)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="de_a"/>
        <pattern-item n="pro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
          </out>
          <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          <out>
          <b pos="3"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB + DE + PRON + INFhaver + PP (se satisfait de l'avoir chanté -> kontentas esti kantinta ĝin)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="de_a"/>
        <pattern-item n="pro"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="5" side="tl" part="nbr"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <b pos="4"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + PP (a lu - legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + ADV + PP (a beaucoup lu - multe legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + TOUS + PP (ont tous lu - ĉiuj legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="haver_pl"/>
        <pattern-item n="tous"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="prn_subj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.tn.pl.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="ĉiu"/>
              <lit-tag v="prn.2.3.4"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver +,  ADV,  + PP (a, donc, lu - legis, do, ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERByavoir + PP (il y a lu - li legis tie ; pour éviter des collisions avec la forme impersonnelle)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="pp_navoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="tie"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERByavoir + ADV + PP (il y a beaucoup lu - li multe legis tie ; pour éviter des collisions avec la forme impersonnelle)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp_navoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="tie"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERByavoir + PP (y a lu - legis tie ; pour éviter des collisions avec la forme impersonnelle)">
      <pattern>
        <pattern-item n="yavoir"/>
        <pattern-item n="pp_navoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="tie"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERByavoir + ADV + PP (y a beaucoup lu - multe legis tie ; pour éviter des collisions avec la forme impersonnelle)">
      <pattern>
        <pattern-item n="yavoir"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp_navoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="tie"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERByavoir + PPavoir (il y a eu - estis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="pp_avoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="past"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERByavoir + ADV + PPavoir (il y a souvent eu - ofte estis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp_avoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="gerpast"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser + PP-ser (est venu - venis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser + ADV + PP-ser (est beaucoup venu - multe venis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser + TOUS + PP-ser (sont tous venus - ĉiuj venis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ser_pl"/>
        <pattern-item n="tous"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="prn_subj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.tn.pl.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="ĉiu"/>
              <lit-tag v="prn.2.3.4"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser +,  ADV,  + PP-ser (a, donc, lu - legis, do, ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + VERBser-pp + PP (kompleksa pasivo: a été lu - estis legita ; forfalas unu helpverbo) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj_perifpp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifpp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBmod + VERBserinf + PP (devront être invités -> devos esti invititaj: pasivo)">
      <pattern>
        <pattern-item n="verbm"/>
        <pattern-item n="ser_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj_perifpp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="esti"/> <!-- pasivo -->
              <lit-tag v="vbser"/>
              <lit-tag v="inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + VERBser-pp + ADV + PP (kompleksa pasivo: a été beaucoup lu - estis ofte legita ; forfalas unu helpverbo) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj_perifpp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifpp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBmod + VERBserinf + ADV + PP (devront être souvent invités -> devos esti ofte invititaj: pasivo)">
      <pattern>
        <pattern-item n="verbm"/>
        <pattern-item n="ser_inf"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj_perifpp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="esti"/> <!-- pasivo -->
              <lit-tag v="vbser"/>
              <lit-tag v="inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser + PP (sont invités -> estas invititaj: pasivo)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verbcj_perifpp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/> <!-- pasivo -->
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser + PP + DE + INF (sont invités de lire -> estas invititaj legi: pasivo)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/> <!-- pasivo -->
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + PPfaire + INF (a fait lire -> legigis )">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="faire-pp"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbtr"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><lit-tag v="res"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="igi"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbtr"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><lit-tag v="res"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="igi"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + PP + DE + INF (a décidé de lire -> decidis legi )">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><lit-tag v="res"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><lit-tag v="res"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <b pos="3"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + PP + DE + PRON + INF (a décidé de le lire -> decidis legi ĝin)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="pro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="sep"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="sep"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <b pos="4"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="VERBser + PP + DE + INFhaver + PP (sont soupçonnés d'avoir fait -> estas suspektitaj esti farintaj: pasivo)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/> <!-- pasivo -->
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="ppres"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="inf"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <lit-tag v="pp3"/>
              <clip pos="5" side="tl" part="nbr"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + PP + DE + INFhaver + PP (a cru de d'avoir fait -> kredis esti farinta )">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="inf"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="sep"/>
                      <lit-tag v="pp3"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="inf"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="sep"/>
                      <lit-tag v="pp3"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver + PP + DE + PRON + INFhaver + PP (a cru de l'avoir fait -> kredis esti farinta ĝin)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="pro"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="inf"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <clip pos="6" side="tl" part="sep"/>
                      <lit-tag v="pp3"/>
                      <clip pos="6" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="inf"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <clip pos="6" side="tl" part="sep"/>
                      <lit-tag v="pp3"/>
                      <clip pos="6" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <out>
          <b pos="5"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="4"/>
          <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="DE + INF (de venir) EO">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
            <out>
              <chunk name="verbcj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <lit-tag v="3"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="DE + SERinf + PP-ser (d'être venu) EO">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="ser_inf"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
            <out>
              <chunk name="verbcj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="verbcj_perif"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <lit v="esti"/>
                  <lit-tag v="vbser"/>
                  <lit-tag v="3"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="pp3"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="DE + HAVERinf + PP (d'avoir lu) EO">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
            <out>
              <chunk name="verbcj_perif" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <lit v="esti"/>
                  <lit-tag v="vbser"/>
                  <lit-tag v="3"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="pp3"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="À + INF (à venir -> pour venir)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
        <out>
        <chunk name="por" case="caseFirstWord">
          <tags>
            <tag><lit-tag v="pr"/></tag>
          </tags>
          <lu>
            <lit v="por"/>
            <lit-tag v="pr"/>
          </lu>
        </chunk>
        <b pos="1"/>
        <chunk name="verbcj" case="caseFirstWord">
          <tags>
            <tag><lit-tag v="SV"/></tag>
            <tag><clip pos="2" side="tl" part="a_verb"/></tag>
            <tag><clip pos="2" side="tl" part="temps"/></tag>
            <tag><clip pos="1" side="tl" part="pers"/></tag>
            <tag><clip pos="1" side="tl" part="nbr"/></tag>
            <tag><var n="tipus_verb"/></tag>
          </tags>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_verb"/>
            <lit-tag v="3"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </chunk>
      </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="À + SERinf + PP-ser (à être venu - por esti veninta)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="ser_inf"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
        <out>
          <chunk name="por" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="verbcj_perif"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="à + HAVERinf + PP (à avoir lu - por esti leginta)">
      <pattern>
        <pattern-item n="a_pr"/>
        <pattern-item n="haver_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
        <out>
          <chunk name="por" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj_perif" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="PROCLITIC PROCLITIC (me'ls EO)">
      <pattern>
        <pattern-item n="proenc"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="tags"/>
                    </lu>
                  </chunk>
                </out>
     <!-- Si el primer clitic és SE: l'eliminem; si no el fem objecte indirecte (eliminem les formes SE ja que estadísticament sembla justificat, la majoria de vegades són benefactius, etc...-->

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <let>
                  <clip pos="1" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
                <out>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="tags"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PRO_FORT PROCLITIC (a mi em, a ella li, ... regla per simplificar el clitic doubling EO'a mi em' -> min)">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="tags"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PRO_FORT PROCLITIC PROCLITIC (a mi me'l, a ella se'l, ... regla per simplificar el clitic doubling EO 'a mi me'l' -> lin al mi )">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="proenc"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="tags"/>
                    </lu>
                  </chunk>
                    <b pos="1"/>
                 <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="tags"/>
                    </lu>
                  </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PROCLITIC (EO)">
      <pattern>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

          <choose>
              <when>  <!-- mirem si és SE o EN per no fer res-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="adv"/>
                    </equal>
                  </or>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: el traduim) -->
                <out>
                  <chunk name="pro_obj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                   <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                   </lu>

                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: PARTICIPI (perquè no enviï gènere ni nombre quan va sol (per tal que no doni error). Caldrà posar-lo tb en les regles d'adjectiu">
      <pattern>
        <pattern-item n="pp"/>
      </pattern>
      <action>               
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
          <let>
            <var n="case"/>
            <lit-tag v="nom"/>
          </let>

        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: INF (perquè posi bé la cua en multiparaules)">
      <pattern>
        <pattern-item n="inf"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="AVOIRinf + PP (avoir lu - esti leginta ) (EO)">
      <pattern>
        <pattern-item n="haverinf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="AVOIRinf + ADV + PP (avoir beaucoup lu - esti leginta ) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj_perif">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: TOUT EN + VERBger (forigo de 'tout en': tout en parlant -> parolante)">
      <pattern>
        <pattern-item n="tout"/>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: EN + VERBger (forigo de 'en': en parlant -> parolante)">
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: EN + PRON + VERBger (forigo de 'en': en parlant -> parolante)">
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="pro"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: EN + VERBger (forigo de 'en': en parlant -> parolante)">
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERBger (perquè posi bé la cua en multiparaules)">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRON VERBhaver + PP (l'a lu - legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="pro-noref"/>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRON VERBser + PP (se sont retrouvés -> estas retrovintaj sin: por ne miskompreni pasivon)">
      <pattern>
        <pattern-item n="tn_obj"/>
        <pattern-item n="ser"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBser PAS + PP (ne se sont pas retrouvés -> ne estas retrovintaj sin: por ne miskompreni pasivon)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="tn_obj"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL + VERBser + PP + DE + INF (il est demandé de lire -> estas petite legi: nepersona pasivo)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ser"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj_perifpp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <lit-tag v="adv"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <b pos="4"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="5" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <clip pos="5" side="tl" part="temps" link-to="3"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL + VERBhaver + VERBser-pp + PP + DE + INF (il a été demandé de lire -> estis petite legi: nepersona pasivo)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj_perifpp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifpp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <out>
          <b pos="5"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="6" side="tl" part="a_verb"/></tag>
              <tag><clip pos="6" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <clip pos="6" side="tl" part="sep"/>
              <clip pos="6" side="tl" part="temps" link-to="3"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL + NE + VERBser + PAS + PP + DE + INF (il n'est pas demandé de lire -> ne estas petite legi: nepersona pasivo)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="5"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj_perifpp">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <lit-tag v="adv"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <out>
          <b pos="6"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="7" side="tl" part="a_verb"/></tag>
              <tag><clip pos="7" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_verb"/>
              <clip pos="7" side="tl" part="sep"/>
              <clip pos="7" side="tl" part="temps" link-to="3"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL + NE + VERBhaver + PAS + VERBser-pp + PP + DE + INF (il n'a pas été demandé de lire -> ne estis petite legi: nepersona pasivo)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj_perifpp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="6" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifpp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="6" side="tl" part="nbr"/></tag> <!-- eble la helpverbo estas en infinitivo -->
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <out>
          <b pos="7"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="8" side="tl" part="a_verb"/></tag>
              <tag><clip pos="8" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="8" side="tl" part="lemh"/>
              <clip pos="8" side="tl" part="a_verb"/>
              <clip pos="8" side="tl" part="sep"/>
              <clip pos="8" side="tl" part="temps" link-to="3"/>
              <clip pos="8" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL + PRON + VERBser + PP + DE + INF (il nous est demandé de lire -> ni estas petitaj legi: nepersona ŝajnpasivo)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="tn_dat"/>
        <pattern-item n="ser"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="prn_subj">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <b pos="2"/>
          <chunk name="verbcj_perifpp">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <out>
          <b pos="5"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="6" side="tl" part="a_verb"/></tag>
              <tag><clip pos="6" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <clip pos="6" side="tl" part="sep"/>
              <clip pos="6" side="tl" part="temps" link-to="3"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL + NE + PRON + VERBser + PAS + PP + DE + INF (il ne nous est pas demandé de lire -> ni ne estas petitaj legi: nepersona ŝajnpasivo)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="tn_dat"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="kunordigo_nbr">
          <with-param pos="6"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="prn_subj">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <b pos="2"/>
          <chunk name="ne">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="verbcj_perifpp">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser"/>
              <lit-tag v="3"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <out>
          <b pos="7"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="8" side="tl" part="a_verb"/></tag>
              <tag><clip pos="8" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="8" side="tl" part="lemh"/>
              <clip pos="8" side="tl" part="a_verb"/>
              <clip pos="8" side="tl" part="sep"/>
              <clip pos="8" side="tl" part="temps" link-to="3"/>
              <clip pos="8" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- montriĝas, ke ofte temas pri verboj mankantaj en nia vortaro; ni konsideras la nekonataĵon kiel verbon por helpi la postan sintaksan analizon -->
    <rule comment="REGLA: PRON UNK ( le manje -> *manje lin ) ">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="pro_obj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV.vbtr.pri.p3.sg.res"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="tags"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="DET VERBconj ( le chante -> kantas ĝin )">
      <pattern>
        <pattern-item n="le_det"/> <!-- ERROR en tagger -->
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.obj.sg.acc"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.2.p3.m.3"/>
            </lu>
          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="DET VERBconj ( le chante -> kantas ĝin )">
      <pattern>
        <pattern-item n="luipp"/> <!-- ERROR en tagger -->
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.obj.sg.acc"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.2.p3.mf.3"/>
            </lu>
          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

  <!-- IMPÉRATIF -->

    <rule comment="COMA VERBimp ( , attends -> , atendas - korektas imperativon )">
      <pattern>
        <pattern-item n="sent_esp2"/>
        <pattern-item n="verb_imp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>

        <choose>
          <when>
            <test><equal><clip pos="1" side="sl" part="lem"/><lit v=","/></equal></test>
            <let><var n="nsent"/><lit v="cm"/></let>
          </when>
          <when>
            <test><equal><clip pos="1" side="sl" part="lem"/><lit v=")"/></equal></test>
            <let><var n="nsent"/><lit v="rpar"/></let>
          </when>
          <when>
            <test><equal><clip pos="1" side="sl" part="lem"/><lit v="»"/></equal></test>
            <let><var n="nsent"/><lit v="rcit"/></let>
          </when>
          <otherwise>
            <let><var n="nsent"/><clip pos="1" side="tl" part="lem"/></let>
          </otherwise>
        </choose>

        <out>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <call-macro n="out_noimp_rue_place">
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRONtn VERBimp ( j'attends. -> mi atendas. - korektas imperativon )">
      <pattern>
        <pattern-item n="tn_subj"/>
        <pattern-item n="verb_imp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prn_subj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRONtn NE VERBimp PAS ( je n'attends pas. -> mi ne atendas. - korektas imperativon )">
      <pattern>
        <pattern-item n="tn_subj"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_imp"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="prn_subj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



  <!-- PRONOMOJ antaŭ la verbo -->

    <rule comment="PRON VERB ( le chante -> kantas ĝin )">
      <pattern>
        <pattern-item n="pro-noref"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
        <call-macro n="prn_nosubj">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="DET VERBconj ( le chante -> kantas ĝin )">
      <pattern>
        <pattern-item n="le_det"/> <!-- ERROR en tagger -->
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.obj.sg.acc"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.2.p3.m.3"/>
            </lu>
          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRON VERBhaver + PP (l'a lu - legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="pro-noref"/>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


   <!-- *** NEGACIONS *** -->

    <rule comment="NE PAS ( ne pas -> ne )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="NE JAMAIS ( ne jamais -> neniam )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="jamais"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="CNJCOO PAS ( mais pas -> sed ne )">
      <pattern>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="cnjcoo" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_cnjcoo"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_cnjcoo"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ne">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj PAS ( ne chante pas -> ne kantas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PAS + PP (n'a pas lu - ne legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERByavoir PAS + PP (il n'y a pas lu - li ne legis tie ; pour éviter des collisions avec la forme impersonnelle)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp_navoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="4"/>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="tie"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERByavoir PAS + PPavoir (il n'y a pas eu - ne estis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp_avoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="past"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERByavoir PAS + PP (n'y a pas lu - ne legis tie ; pour éviter des collisions avec la forme impersonnelle)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="yavoir"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp_navoir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/>
          <chunk name="tie">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="tie"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- necesa: komparu kun la ekzistanta (posta) regulo: NE VERBconj ADV QUE ( ne veux efectivement que -> volas efektive nur ) -->
    <rule comment="NE VERBconj PAS QUE ( ne savais pas que -> ne sciis ke )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pas"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>

        <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="2"/>
                 <chunk name="cnjsub">
                            <tags>
                              <tag><lit-tag v="cnjsub"/></tag>
                            </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADV PAS ( ne concerne néanmoins pas -> tamen ne koncernas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PAS + ADV + PP (n'a pas beaucoup lu - ne multe legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv_cnj"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv_cnj"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ADV PAS  + PP (n'a donc pas lu - ne do legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/>
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/>
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver +,  ADV,  + PAS + PP (n'a, en revanche, pas lu - ne legis, kontraŭe, ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="7"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="7" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="7" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="7" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="7"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
              <tag><clip pos="4" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PAS + PP-ser (n'est pas venu - ne venis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PAS + ADV + PP-ser (n'est pas beaucoup venu - ne multe venis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv_cnj"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv_cnj"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="NE VERBser ADV PAS + PP-ser (n'est en revanche pas venu - ne multe venis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pas"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/>
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/>
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PAS +,  ADV,  + PP-ser (n'est pas, donc, venu - ne venis, do, ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="7"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="7" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="7" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="7" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="7"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="5" side="tl" part="a_adv"/></tag>
              <tag><clip pos="5" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adv"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser +,  ADV,  + PAS + PP-ser (n'est, en revanche, pas venu - ne venis, kontraŭe, ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="pas"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="7"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="7" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="7" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="7" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="7"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="7" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
              <tag><clip pos="4" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="cm"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="NE PRON VERBconj PAS ( ne le chante pas -> ne kantas ĝin )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE DET VERBconj PAS ( ne le chante pas -> ne kantas ĝin )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="le_det"/> <!-- ERROR en tagger -->
        <pattern-item n="verbcj"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.obj.sg.acc"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.2.p3.m.3"/>
            </lu>
          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBhaver PAS + PP (ne l'a pas lu - ne legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBhaver PAS + ADV + PP (ne l'a pas beaucoup lu - ne multe legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adv_cnj"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="6" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="6"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBser PAS + PP-ser (n'y est pas venu - ne venis tie ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBser PAS + ADV + PP-ser (n'y est pas beaucoup venu - ne multe venis tie ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="ser"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv_cnj"/>
                    </lu>
                  <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="6" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="6"/>
        </call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv_cnj"/>
                    </lu>
                  <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="5"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj PAS + INF (ne voulait pas chanter -> ne volis kanti)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pas"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>

        <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
        </out>

   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="sl" part="lem"/>
              <lit v="faire"/>
            </equal>
          </test>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </when>
        <otherwise>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>
        <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
   </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj PAS + DE + INF (décida de chanter -> decidis kanti)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pas"/>
        <pattern-item n="de_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj_perif">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="5" side="tl" part="temps"/></tag>
              <tag><clip pos="5" side="tl" part="pers"/></tag>
              <tag><clip pos="5" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBconj + DE + NE PAS INF (décida de ne pas chanter -> decidis ne kanti)">
      <pattern>
        <pattern-item n="verbcjger"/>
        <pattern-item n="de"/>
        <pattern-item n="ne"/>
        <pattern-item n="pas"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="res"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="5" side="tl" part="temps"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBconj PAS ( ne lui chante pas -> ne kantas al li)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- *** aliaj neoj *** -->

    <rule comment="NE VERBconj ADVNEG ( ne chante jamais -> neniam kantas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="advneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ADVNEG + PP (n'a jamais lu - neniam legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="advneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADV ADVNEG ( ne chante presque jamais -> preskaŭ neniam kantas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="advneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_plu">
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ADVNEG + PP (n'a presque jamais lu - preskaŭ neniam legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="advneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_plu">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
              <tag><clip pos="4" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBconj ADVNEG ( ne le chante jamais -> neniam kantas ĝin )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="advneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="4" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBhaver ADVNEG + PP (ne l'a jamais lu - neniam legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="haver"/>
        <pattern-item n="advneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="4" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                    <b pos="1"/>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="4" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                    <b pos="1"/>
                </out>
            </otherwise>
        </choose>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj PRONNEG ( ne chante rien -> kantas nenion )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PRONNEG + PP (n'a rien lu - legis nenion ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pronneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADVNEG PRONNEG ( ne chante jamais rien -> neniam kantas ion )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="advneg"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ADVNEG PRONNEG PP (n'a jamais rien lu - neniam legis ion ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="advneg"/>
        <pattern-item n="pronneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADV PRONNEG ( ne chante presque rien, ne chante plus rien -> kantas preskaŭ nenion, kantas plu nenion )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_plu">
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PRONNEG + PP (n'a presque rien lu, n'a plu rien lu - legis preskaŭ nenion, legis plu nenion ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pronneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_plu">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


   <!-- ne ... plus -->

    <rule comment="NE VERBconj PLUS ( ne veux plus -> ne plu volas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="plus"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PLUS PP ( n'a plus voulu -> ne plu volis )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="plus"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PLUS PP-ser (n'est plus venu - ne plu venis">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="plus"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADV PLUS ( ne veux guère plus -> ne plu volas multe; ne veux pas plu -> ne volas pli )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="plus"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>
                <test>
                    <equal><clip pos="3" side="sl" part="lem"/><lit v="pas"/></equal>
                </test>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="pli">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="pli"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                     <clip pos="3" side="tl" part="lemh"/>
                     <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PLUS PP ( n'a guère plus voulu -> ne plu volis multe )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="plus"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                     <clip pos="3" side="tl" part="lemh"/>
                     <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                     <clip pos="3" side="tl" part="lemh"/>
                     <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser ADV PLUS PP-ser (n'est guère plus venu - ne plu venis multe">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="plus"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                     <clip pos="3" side="tl" part="lemh"/>
                     <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                     <clip pos="3" side="tl" part="lemh"/>
                     <clip pos="3" side="tl" part="a_adv_cnj"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj PLUS QUE ( n'est plus que -> ne estas pli ol)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="plus"/>
        <pattern-item n="quepercorregir"/>

      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                     <lit v="ne"/>
                     <lit-tag v="adv"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                     <lit v="pli"/>
                     <lit-tag v="adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                     <lit v="ol"/>
                     <lit-tag v="cnjcoo"/>
                    </lu>
                    <b pos="1"/>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    <rule comment="NE VERBconj PLUS QUE ( ne veux plus que -> ne plu volas ke)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="plus"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="ne plu" case="caseFirstWord">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="ne plu"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="cnjsub" >
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


   <!-- ne... que -->

    <rule comment="NE VERBconj QUE ( ne veux que -> volas nur )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b/>
          <chunk name="nur">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
            <lu>
             <lit v="nur"/>
             <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PP QUE ( n'a voulu que -> volis nur )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PP-ser QUE (n'est venu que - venis nur">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="vbser-pp"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
          </chunk>
        </out>
  </when>
    <otherwise>
<call-macro n="set_temps2">
  <with-param pos="2"/>
  <with-param pos="3"/>
</call-macro>
        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBimp QUE ( il ne faut que -> necesas nur )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="nur">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
            <lu>
             <lit v="nur"/>
             <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver VERBimpersPP QUE ( n'a fallu que -> necesis nur )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="verbpp_impers"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/>
          <chunk name="nur">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
            <lu>
             <lit v="nur"/>
             <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj INF QUE ( ne veux voir que -> volas vidi nur )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="inf"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_peti">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>

   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="sl" part="lem"/>
              <lit v="faire"/>
            </equal>
          </test>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </when>
        <otherwise>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
   </choose>
                <out>
                  <b pos="3"/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PP QUE ( n'a voulu voir que -> volis vidi nur )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pp"/>
        <pattern-item n="inf"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
                <out>
                  <b pos="4"/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PP-ser QUE (n'est venu voir que - venis vivi nur">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="vbser-pp"/>
        <pattern-item n="inf"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
               </out>
  </when>
    <otherwise>
<call-macro n="set_temps2">
  <with-param pos="2"/>
  <with-param pos="3"/>
</call-macro>
        <out>
          <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
               </out>
            </otherwise>
        </choose>
               <out>
                  <b pos="4"/>
                  <chunk name="nur">
                        <tags>
                          <tag><lit-tag v="adv"/></tag>
                        </tags>
                    <lu>
                     <lit v="nur"/>
                     <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADV QUE ( ne veux efectivement que -> volas efektive nur )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_sxati">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="nur">
           <tags>
             <tag><lit-tag v="adv"/></tag>
           </tags>
           <lu>
             <clip pos="3" side="tl" part="lem"/>
             <clip pos="3" side="tl" part="a_adv"/>
           </lu>
           <b pos="3"/>
           <lu>
             <lit v="nur"/>
             <lit-tag v="adv"/>
           </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBconj QUE ( ne m'occupe que -> okupas min nur )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcjger"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <b pos="3"/>
          <chunk name="nur">
           <tags>
             <tag><lit-tag v="adv"/></tag>
           </tags>
           <lu>
             <lit v="nur"/>
             <lit-tag v="adv"/>
           </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- *** demandoj *** -->

    <rule comment="PRONsubjenc ( aldono de la spaco kiu mankas en la franca )">
      <pattern>
        <pattern-item n="prosubjenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <b/>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBimpers ILenc ( manque-t-il -> mankas )">
      <pattern>
        <pattern-item n="verb_impers"/>
        <pattern-item n="il_enc"/>
      </pattern>
      <action>            
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver ILenc + VERBimpersPP (a-t-il manqué - mankis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="il_enc"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBconj PRONsubjenc ( chante-t-il -> li kantas )">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="prosubjenc"/>
      </pattern>
      <action>            
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhaver PRONsubencl + PP (a-t-il lu - li legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="haver"/>
        <pattern-item n="prosubjenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser PRONsubencl + PP-ser (est-t-il arrivé - li alvenis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="prosubjenc"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="past"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBser PRONsubencl + PP (est-t-il caché - li estas kaŝita ; pasivo ) (EO)">
      <pattern>
        <pattern-item n="ser"/>
        <pattern-item n="prosubjenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj_perifpp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBimpers ILenc PAS ( ne manque-t-il pas -> ne mankas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="il_enc"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ILenc PAS + VERBimpersPP (n'a-t-il pas manqué - li ne mankis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="il_enc"/>
        <pattern-item n="pas"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj PRONsubjenc PAS ( ne chante-t-il pas -> li ne kantas )">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="prosubjenc"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_noimp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PRONsubencl PAS + PP (n'a-t-il pas lu - li ne legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="prosubjenc"/>
        <pattern-item n="pas"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBser PRONsubencl PAS + PP-ser (n'est-t-il pas arrivé - li ne alvenis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="ser"/>
        <pattern-item n="prosubjenc"/>
        <pattern-item n="pas"/>
        <pattern-item n="vbser-pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <choose>
              <when>   <!-- traduccions des de present -> passat (1) -->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/> <!-- present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/> <!-- present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>   <!-- komenco de frazo -> + ĉu -->
                <test>
                    <equal>
                      <var n="EOS"/>
                      <lit v="true"/>
                    </equal>
                </test>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="cnj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="cnjadv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉu"/>
                      <lit-tag v="cnjadv"/>
                    </lu>
                  </chunk>
                   <b/>
                  <chunk name="prn_subjenc">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <otherwise>
                <call-macro n="firstWord">
                  <with-param pos="1"/>
                    </call-macro>
                <out>
                  <chunk name="prn_subjenc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><var n="nombre"/></tag>
                      <tag><var n="case"/></tag>
                      <tag><var n="changecase"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="3"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="ne">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
        </choose>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- nepersonaj verboj -->

    <rule comment="IL VERBimpers (il pleut -> pluvas)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="verb_impers"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="S'IL VERBimpers (s'il pleut -> se pluvas)">
      <pattern>
        <pattern-item n="se"/>
        <pattern-item n="il"/>
        <pattern-item n="verb_impers"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="cnj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="cnjsub"/></tag>
            </tags>
            <lu>
              <lit v="se"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL PRON VERBimperscomp (il le faut -> necesas tio; il me faut -> necesas al mi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="pro-noref"/>
        <pattern-item n="verb_impers_comp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <call-macro n="prn_dat">
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBhaver + VERBimpersPP (il a plu - pluvis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL PRON VERBhaver + VERBimperscompPP (il m'a fallu - necesis al mi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="pro-noref"/>
        <pattern-item n="haver"/>
        <pattern-item n="verbpp_impers_comp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="3" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/>
        </out>
        <call-macro n="prn_dat">
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBhaver + ADV + VERBimpersPP (il a beaucoup plu - multe pluvis">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBimpers INF (il faut manger -> necesas manĝi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBimpers PAS ( il ne pleut pas -> ne pluvas )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
       <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBimpers PLUS ( il ne pleut plus -> ne plu pluvas )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="plus"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne plu" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
             <lit v="ne plu"/>
             <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
       <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBimpers ADV PAS ( il ne pleut en effet pas -> fakte ne pluvas )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
             <clip pos="4" side="tl" part="lemh"/>
             <clip pos="4" side="tl" part="a_adv"/>
             <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
       <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBimpers PLUS ( il ne pleut en effet plus -> efektive ne plu pluvas )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="plus"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne plu" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
             <clip pos="4" side="tl" part="lemh"/>
             <clip pos="4" side="tl" part="a_adv"/>
             <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
             <lit v="ne plu"/>
             <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
       <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBs'agir ( il ne s'agit pas -> ne temas -- la regulo ial necesas, kvankam mi ne bone komprenas kial)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="sagir"/> <!-- ial sen 'pas': ne estas eraro -->
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver PAS + VERBimpersPP (n'a pas plu - ne pluvis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver PLUS + VERBimpersPP (n'a plus plu - ne plu pluvis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="plus"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne plu" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
             <lit v="ne plu"/>
             <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver PAS + ADV + VERBimpersPP (n'a pas beaucoup plu - ne multe pluvis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="6" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="6"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
       <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IL NE VERBhaver PLUS + ADV + VERBimpersPP (n'a plus beaucoup plu - ne plu multe pluvis)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="plus"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="verbpp_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne plu" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
             <lit v="ne plu"/>
             <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
        </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="6" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="6"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
       <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE PRON VERBimperscomp PAS (il ne le faut pas -> ne necesas tio; il ne me faut pas -> ne necesas al mi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="pro-noref"/>
        <pattern-item n="verb_impers_comp"/>
        <pattern-item n="pas"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
        </out>
        <call-macro n="prn_dat">
          <with-param pos="3"/>
        </call-macro>
       <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE PRON VERBimperscomp PAS QUE (il ne me faut pas que -> ne necesas al mi ke)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="pro-noref"/>
        <pattern-item n="verb_impers_comp"/>
        <pattern-item n="pas"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="verbcj">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <!--<tag><var n="tipus_verb2"/></tag>-->
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
        </out>
        <call-macro n="prn_dat">
          <with-param pos="3"/>
        </call-macro>
       <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <out>
          <b pos="5"/>
          <chunk name="cnjsub" >
            <tags>
              <tag><lit-tag v="cnjsub"/></tag>
            </tags>
            <lu>
              <lit v="ke"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE PRON VERBhaver PAS + VERBimperscompPP (il ne m'a pas fallu - ne necesis al mi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="pro-noref"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="verbpp_impers_comp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
       <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
       </out>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="4" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="4" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="6" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="4" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="6" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="4"/>
          <with-param pos="6"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="4"/>
        </out>
        <call-macro n="prn_dat">
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBimpers QUE ( il ne faut que -> necesas nur )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verb_impers"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
       <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk name="verbcj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <out>
          <b pos="3"/>
          <chunk name="nur" >
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="nur"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver VERBimpersPP QUE (n'a fallu que - necesis nur)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="verbpp_impers"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="4"/>
          <chunk name="nur" >
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="nur"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBcop ADJ QUE (il est vrai que -> estas vere ke)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="copula"/>
        <pattern-item n="adj_adv"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv" >
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="cnjsub" >
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBcop PLUS ADJ QUE (il est plus important que -> estas pli grave ke)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="copula"/>
        <pattern-item n="plus_moins"/>
        <pattern-item n="adj_adv"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv" >
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="cnjsub" >
                    <tags>
                      <tag><lit-tag v="cnjcoo"/></tag>
                    </tags>
                    <lu>
                      <lit v="ol"/>
                      <lit-tag v="cnjcoo"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBcop ADV ADJ QUE (il est très important que -> estas tre grave ke)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="copula"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj_adv"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv" >
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="cnjsub" >
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBcop PLUS QUE ADJ (il est plus que probable -> estas pli ol probable )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="copula"/>
        <pattern-item n="plus_moins"/>
        <pattern-item n="quepercorregir"/>
        <pattern-item n="adj_adv"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv" >
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <lit v="ol"/>
                      <lit-tag v="cnjcoo"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBcop PAS ADJ QUE ( il n'est pas vrai que -> ne estas vere ke )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="copula"/>
        <pattern-item n="pas"/>
        <pattern-item n="adj_adv"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
                <out>
                  <b pos="4"/>
                  <chunk name="adv" >
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="5"/>
                  <chunk name="cnjsub" >
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBcop PAS ADV ADJ QUE ( il n'est pas très important que -> ne estas tre grave ke )">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="copula"/>
        <pattern-item n="pas"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj_adv"/>
        <pattern-item n="quepercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
                <out>
                  <b pos="4"/>
                  <chunk name="adv" >
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="5"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <lit-tag v="adv"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="6"/>
                  <chunk name="cnjsub" >
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- nepersonaj verboj + vbmod -->

    <rule comment="IL VERBmod VERBimpersinf (il peut pleuvoir -> povas pluvi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="verbm"/>
        <pattern-item n="verbinf_impers"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBhaver VERBmodpp VERBimpersinf (il a pu pleuvoir -> povis pluvi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="verbmpp"/>
        <pattern-item n="verbinf_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL VERBhaver VERBmodpp ADV VERBimpersinf (il a pu beaucoup pleuvoir -> multe povis pluvi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="haver"/>
        <pattern-item n="verbmpp"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="verbinf_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="4" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
          </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="4" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
              </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="4" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBmod PAS VERBimpersinf (il ne peut pas pleuvoir -> ne povas pluvi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="verbm"/>
        <pattern-item n="pas"/>
        <pattern-item n="verbinf_impers"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
       <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver PAS VERBmodpp VERBimpersinf (il n'a pas pu pleuvoir -> povis pluvi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="verbmpp"/>
        <pattern-item n="verbinf_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="6"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <clip pos="6" side="tl" part="temps"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
          </when>

            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <clip pos="6" side="tl" part="temps"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
       <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="IL NE VERBhaver PAS ADV VERBmodpp VERBimpersinf (il n'a pas pu beaucoup pleuvoir -> povis pluvi)">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="ne"/>
        <pattern-item n="haver"/>
        <pattern-item n="pas"/>
        <pattern-item n="verbmpp"/>
        <pattern-item n="adv_cnj"/>
        <pattern-item n="verbinf_impers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="7"/>
        </call-macro>

       <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <clip pos="6" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="5" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <clip pos="7" side="tl" part="temps"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="2" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <clip pos="6" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="pp3"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b pos="5"/>
                    <lu>
                      <clip pos="7" side="tl" part="lemh"/>
                      <clip pos="7" side="tl" part="a_verb"/>
                      <clip pos="7" side="tl" part="temps"/>
                      <clip pos="7" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
       <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <!--************************************ ALTRES ************************************************ -->

    <rule comment="UNK">
      <pattern>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="unknown" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="unknown"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="ADVERB">
      <pattern>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nadv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="ADV ITG">
      <pattern>
        <pattern-item n="advitg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="ADV REL">
      <pattern>
        <pattern-item n="advrel"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRONOM tònic/interrogatiu/possessiu EO">
      <pattern>
        <pattern-item n="tn_itg_pos"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <let><var n="npron"/><clip pos="1" side="sl" part="lem"/></let>
        <modify-case><var n="npron"/><lit v="aa"/></modify-case>
        <out>
          <chunk namefrom="npron" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRONOM tònic/interrogatiu/possessiu EO">
      <pattern>
        <pattern-item n="tn_pro"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <let><var n="npron"/><clip pos="1" side="sl" part="lem"/></let>
        <modify-case><var n="npron"/><lit v="aa"/></modify-case>
        <out>
          <chunk namefrom="npron" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRONOM indefinit i companyia (EO)">
      <pattern>
        <pattern-item n="tn"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prn_nosubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PRONOM relatiu EO">
      <pattern>
        <pattern-item n="relatiu"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
<!-- ni ne atribuas defaŭltan nombron, ĉar ni decidos ĝin poste, surbaze de la SN
        <call-macro n="default_nombro">
        </call-macro>
-->
        <out>
          <chunk name="prn" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PREP + PRONOM relatiu EO( dels quals, pels que, als que ...)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="relatiu"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
<!--
        <call-macro n="default_nombro">
        </call-macro>
-->
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="relatiu">
            <tags>
              <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><lit-tag v="rel"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="S'IL (doit se traiter par une règle ">
      <pattern>
        <pattern-item n="se"/>
        <pattern-item n="il_ils"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="cnj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="cnjsub"/></tag>
            </tags>
            <lu>
              <lit v="se"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn_subj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRON personal">
      <pattern>
        <pattern-item n="prpers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


 <rule comment="CNJ">
      <pattern>
        <pattern-item n="cnj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="ncnj"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="ncnj" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PREP">
      <pattern>
        <pattern-item n="prep"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: SENT A (EO, ex. . A -> en (manko de supersigno; eraro en senambiguilo))">
      <pattern>
        <pattern-item n="sent_esp"/>
        <pattern-item n="a-all"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="2"/></call-macro>
        <let><var n="nsent"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="en" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2"><lit v="en"/></get-case-from>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: SENT A. (EO, ex. . A. -> A. (mallongigo))">
      <pattern>
        <pattern-item n="sent_esp"/>
        <pattern-item n="a-all"/>
        <pattern-item n="punkto"/>
      </pattern>
      <action>
        <let><var n="nsent"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ant">
            <tags>
              <tag><lit-tag v="SN.m"/></tag>
            </tags>
            <lu>
              <lit v="A"/>
              <lit-tag v="np.ant.m.sg.nom"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name=".">
            <tags>
              <tag><lit-tag v="."/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: A. (EO, ex. A. -> A. (mallongigo))">
      <pattern>
        <pattern-item n="a-all"/>
        <pattern-item n="punkto"/>
      </pattern>
      <action>
        <out>
          <chunk name="ant">
            <tags>
              <tag><lit-tag v="SN.m"/></tag>
            </tags>
            <lu>
              <lit v="A"/>
              <lit-tag v="np.ant.m.sg.nom"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name=".">
            <tags>
              <tag><lit-tag v="."/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PREP PRONdatobj: pour lui -> por li (por eviti: *por al li, *por lin) ">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="prndatobj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.subj"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.2.3.4.5"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PREP PRONdatobj INF: pour lui donner -> por doni al li (por eviti, ke la antaŭa regulo faru: *por li doni) ">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="prndatobj"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_nous_vous">
          <with-param pos="2"/>
        </call-macro>

        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="verb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="tipus_prn" link-to="5"/>
             </lu>
           </chunk>
          <b pos="2"/>
        </out>
        <call-macro n="prn_nosubj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PLUS DE: plus de -> pli ol ) ">
      <pattern>
        <pattern-item n="plus_moins"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="m_plus_moins">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cnj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="cnjadv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="adv"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="ol"/>
              <lit-tag v="cnjcoo"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: CE QUE: ce que -> tio kio, ce qui -> tio kio ">
      <pattern>
        <pattern-item n="ce-erara"/>
        <pattern-item n="quequi-erara"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prn_nosubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.tn.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="tio"/>
              <lit-tag v="prn.tn.3.4"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag><lit-tag v="SNrelatiu4.rel.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="kio"/>
              <lit-tag v="prn.rel.3.4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: TOUT CE QUE: tout ce que -> ĉio kio, tout ce qui -> ĉio kio ">
      <pattern>
        <pattern-item n="toutce"/>
        <pattern-item n="quequi-erara"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prn_nosubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.tn.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="ĉio"/>
              <lit-tag v="prn.tn.3.4"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag><lit-tag v="SNrelatiu5.rel.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <lit v="kio"/>
              <lit-tag v="prn.rel.3.4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="IJ">
      <pattern>
        <pattern-item n="ij"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ij" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="ij"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule> <!-- REGLA: reset variables, hem afegit la coma per al pro-drop (cal veure el reset de variablesi EO)-->
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <let>
          <var n="nombre"/>
          <lit-tag v="sg"/>
        </let>
        <let>
          <var n="genere"/>
          <lit-tag v="m"/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit-tag v="aa"/>
        </let>
        <choose>
          <when>
            <test>
              <not>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=";"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=","/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=":"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="..."/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="("/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=")"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="«"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="»"/>
                  </equal>
                </or>
              </not>
            </test>        
            <let>
              <var n="EOS"/>
              <lit v="true"/>
            </let>
          </when>
        </choose>
        <let><var n="nsent"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nsent">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule> <!-- REGLA: sent_coma (hem afegit regla per a la coma per al pro-drop (no l'incloem a l'anterior per no fer el reset de variables EO))-->
      <pattern>
        <pattern-item n="sent_coma"/>
      </pattern>
      <action>
        <out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule> <!-- REGLA: sent_lpar -->
      <pattern>
        <pattern-item n="sent_lpar"/>
      </pattern>
      <action>
        <out>
          <chunk name="lpar">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule> <!-- REGLA: sent_rpar -->
      <pattern>
        <pattern-item n="sent_rpar"/>
      </pattern>
      <action>
        <out>
          <chunk name="rpar">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule> <!-- REGLA: sent_lcit -->
      <pattern>
        <pattern-item n="sent_lcit"/>
      </pattern>
      <action>
        <out>
          <chunk name="lcit">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule> <!-- REGLA: sent_rcit -->
      <pattern>
        <pattern-item n="sent_rcit"/>
      </pattern>
      <action>
        <out>
          <chunk name="rcit">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

  </section-rules>
</transfer>
